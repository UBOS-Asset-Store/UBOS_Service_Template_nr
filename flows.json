[
    {
        "id": "03b872fad46b157d",
        "type": "tab",
        "label": "Settings",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "4ff433f9acd9e5d9",
        "type": "tab",
        "label": "Components",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "c5ed5eb27ecd0939",
        "type": "tab",
        "label": "Catalog",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "7f99d43ecb62a74e",
        "type": "tab",
        "label": "Links",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1d597c33277dd321",
        "type": "tab",
        "label": "Auth Module",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "f6a1e1c23b85b045",
        "type": "tab",
        "label": "Category",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "4a515ca629060193",
        "type": "tab",
        "label": "Warehouse",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "c504bd7256b5c336",
        "type": "tab",
        "label": "History",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "6a6d2afa5b0c7ec9",
        "type": "subflow",
        "name": "icons",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 140,
                "wires": [
                    {
                        "id": "7b7dced66ebb9ed0"
                    },
                    {
                        "id": "7fa3ec8a83a8d6d4"
                    },
                    {
                        "id": "1fcb90eeabb6669e"
                    },
                    {
                        "id": "30109da41244edcd"
                    },
                    {
                        "id": "3663c648f09ebc0d"
                    },
                    {
                        "id": "3b31e145877a6685"
                    },
                    {
                        "id": "b31bfa80b11574dd"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 580,
                "y": 260,
                "wires": [
                    {
                        "id": "ca71069b540375cf",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "7316be74670df481",
        "type": "group",
        "z": "1d597c33277dd321",
        "name": "Roles",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "41e2ccc8bf04ea8f",
            "f5cd06d26d9cecab",
            "2deb169266566691",
            "d599dc13851a983a",
            "067df7e34de9936a",
            "fa4dca1eb36ee367",
            "887b5cae6102c679",
            "699f57ed38678213",
            "8462ed8ac6a580a5",
            "8449b373e28d64c6",
            "4ad501803f507d46",
            "fb5d683ad018286c",
            "cae9a4e3f712fac7",
            "28ba59c6d2ce6116",
            "165bf0af6d90722c",
            "7f9fe017cf21e629",
            "0f67d839d08d8474",
            "f28d4c1dc58b6d48",
            "e8e7e0b556bf4851",
            "07491bef43746354",
            "d0e1a24df9177e3c",
            "7a65b261135e25a3",
            "05b72b3a47176e41",
            "5593907067faab18",
            "8fbf6d10cd3030c3",
            "ca3803c8cc78092c",
            "01358c3f0ebbc277",
            "bf96be30b0877388",
            "f84463bd78973e65",
            "2cd74eb4124239c9",
            "4b3e55b0402a8b5b",
            "8cfbefe159b617bb",
            "cea81a4f3aaba9d1",
            "9ea85d07af9014cc"
        ],
        "x": 14,
        "y": 1119
    },
    {
        "id": "f9276761348501ee",
        "type": "group",
        "z": "1d597c33277dd321",
        "name": "Authorization",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "1148f42a7c904d7d",
            "29b56ed885c828aa",
            "cdfa6ad536d2c182",
            "7a8ea31464375c65",
            "bbb4626d131a82f0",
            "0c53fafc7b8b0abd",
            "c1fa3cab447b2b50",
            "1a9e1833be1a828e",
            "c9df2e0ee4facac0",
            "9ab82eb2290d4ad3",
            "c0fa136aaf678f9e",
            "53b13c128521ed39",
            "44daf418a66beccb",
            "bf5e2f39781a74ce",
            "900a4d7eacd40aa8",
            "e3625cb5937935f6",
            "a5c4252f23d5d115",
            "5534dd32cd4eb583",
            "0474cfe50076c371",
            "5c03c66838f6552f",
            "c68c5316bd635ebb",
            "77270770ed4668be",
            "63ac53624ddc9f69",
            "0588627a938f21df",
            "b88f1ef7c12944c5",
            "ba71b7a6be54c24c",
            "dbd258ba690289ce",
            "d15344cdbcdb2b92",
            "94b37b1e3702210e",
            "fb32d711d6acda3f",
            "5540fd046af9b4a3",
            "12049123ddea997b",
            "1d501ae4389adf71",
            "55ace3edd9a3d977",
            "61870a4a0e1fb5f9",
            "d989f3149f1e2ca1",
            "1d8c3cd5fbcb34cd",
            "8ba29eb975c3dada",
            "4ccf1a608a0fda78",
            "70fa57ef0b707609",
            "7c44725ce0dd6e66",
            "a2e4ed40bc1e266b",
            "d93b081f2710e473",
            "eea1d395aab1e021",
            "c23a004b5ed46242",
            "f69ec6913f31608b",
            "efdb687339852f7a",
            "bb0a04a6e657b34d",
            "386cc27ed90aca7a",
            "64f74f7dd4daee26"
        ],
        "x": 14,
        "y": 19
    },
    {
        "id": "e1ecfd85e80ab727",
        "type": "group",
        "z": "1d597c33277dd321",
        "name": "Confirm Email Registration",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "a6a7cb1ef486adb7",
            "d544b61618be524c",
            "dbe7859bdc101a72",
            "37b7307925dc6b6a",
            "07d861d7dd6c672b",
            "2707afa221c18f14",
            "c366b8170361386c",
            "f68b14b9e5530137",
            "f63003a7f842b820",
            "367ec69a89a7b36f"
        ],
        "x": 774,
        "y": 1119
    },
    {
        "id": "7fc8f7b5100d61fa",
        "type": "group",
        "z": "1d597c33277dd321",
        "name": "Reset Paaword",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "630934d2ba3adfcf",
            "987a966f406f0317",
            "e113d5b54eb11866",
            "7e71f20e36f2c96b",
            "5beb3d0299dca4de",
            "977154bfa575d8cc",
            "03b618ad5619a3d9",
            "22891024c234ec96",
            "f8a1974e5e9a4952",
            "a462ea7c3960e181",
            "082882594be5b9d7",
            "63efc525ea19ee3b",
            "3779488ea8a44789",
            "320f408ac86ee917",
            "4b4a136be3f5195b",
            "2e49347092094481",
            "a2208c9176d340a1",
            "cb08f0e921e88269",
            "7337934d3eb84cbf",
            "610dcf5c7ed05495",
            "f30907efea165427",
            "899585c49eb514f1",
            "14aa79d907f0338e",
            "768aec5dcfeac092",
            "e52719be6f4aaace",
            "b4402979422646ea",
            "80d513cc3b2e29d9",
            "4d26a8b37aab9252",
            "f39150d365ef9bec",
            "32ffca7dbdbb4b71",
            "f51db28c9e96d516",
            "7e6bc32cb18cc281",
            "a30a0fa5214a351d",
            "f3922cc6d64ea70c",
            "6a7b90b49a12cd70",
            "f68cd0520c6f89c8",
            "343285b9ba6b3494",
            "da5cd38c8eedf28f",
            "ba4bf0a202e85aa9"
        ],
        "x": 774,
        "y": 1319
    },
    {
        "id": "a90efec1f305b81b",
        "type": "group",
        "z": "1d597c33277dd321",
        "name": "User Management",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "d6514bbe71e65095",
            "ddbb2aa3488ec794",
            "53e691dbd1ccc129",
            "83201a8a5c461bf9",
            "2517b98b225f0bfc",
            "914b5444373ac979",
            "cb0dd564c0afc3fb",
            "d9ee28c0b21412cf",
            "763eb79b3dbfb659",
            "d3788030f7e71fd5",
            "c7bbf146e6a8bd40",
            "14b86e0dbc9b7eca",
            "6298224e69af4a5a",
            "a38866e4c1e1d31c",
            "781c1955fba3c961",
            "09af9c4093cde20e",
            "1962c67b0b4ea952",
            "9ae9dacd29388d9c",
            "dccbb9c0a6def363",
            "6cdd3684e7e6eae2",
            "fccade1ca44220e1",
            "b46c377eeb301892",
            "aac6543e13b37cf1",
            "01eb084992db323d",
            "c71cefdf1bddb1f8",
            "b52b3bb433fc481d",
            "6ca5f0562b306fbd",
            "95238bbd3e32d46e",
            "48be74f303bc1af1",
            "8264ce8b934ba565"
        ],
        "x": 14,
        "y": 3019
    },
    {
        "id": "b3d42080d0ac0627",
        "type": "group",
        "z": "1d597c33277dd321",
        "name": "Modules",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "60168f0b6359e80b",
            "d25495d563753d1b",
            "6424d65c3cce4564",
            "7c21bf0c8afe1df6",
            "a7a72ff6ca718b38",
            "1be16a6d1e8b0928",
            "c86d14e43a6806aa",
            "24199a89aa5cfb3e",
            "b35cbcf50d96c3a2",
            "c1ec694d4341700a",
            "bc954f266a2b838a",
            "5ed2ac4477524bb6",
            "b0d4ba6ae94a791a",
            "2b0d4b88b690c64f",
            "6bf6dd45d786a728",
            "507eb68f361f400f",
            "c9a0b0c5df2594d1",
            "f3d54849a48f673a",
            "4b74e0911da68811",
            "c04943723ded000b",
            "326e3f9f33aceecc",
            "76776dde6b952f67",
            "dd3ceb6826a119a4",
            "cb9899b16112bf52",
            "8587475a13f0b00c",
            "db371df8989b02fd",
            "d3e1c8dd84bb6416",
            "f8e5af5f59a1e3af",
            "1ec477324b3db1da",
            "b04dfc182eade345",
            "f4360b75f9ce23dc",
            "778b984ef2142d31",
            "ff2e358584da18de",
            "97989da4cd772ad4",
            "98ade5ea288bc21f",
            "4667d8f84b698011",
            "c94501f1b9a31a89",
            "de23ce4e758a8481",
            "a64d8b91b0b8ad25",
            "7468fc1efa130293",
            "10379d8fc69f6bbc",
            "9320b1e978a9c77e",
            "bf212acc267aad4f"
        ],
        "x": 14,
        "y": 2059
    },
    {
        "id": "33f66acf801d0549",
        "type": "group",
        "z": "f6a1e1c23b85b045",
        "name": "Category page",
        "style": {
            "stroke": "#0070c0",
            "label": true
        },
        "nodes": [
            "c9ede187048038f8",
            "bee0a417c2c76f4a",
            "ad4588e0b6697b58",
            "4390ab46991fdcd7",
            "0172efbf86b302d9",
            "0fdc1ede3a30c495",
            "181d248dc917ca81",
            "4a829645c123c888",
            "c76127892f0d3a6f",
            "f486b3400cf5fe67",
            "d10d3136976d88db",
            "99a45a4b2eba7eb4",
            "4a4ce81660b3eb58",
            "a6b6e53ec8024b9d",
            "3976fd40aefa7464",
            "0b38ac6446d49e4e",
            "83a83d2a2a4ad1e6",
            "1deb935b1750ec9e",
            "766d74da483182a4",
            "0b1b6d283bc5371c"
        ],
        "x": 14,
        "y": 79
    },
    {
        "id": "b5989844a1ca69ed",
        "type": "group",
        "z": "c5ed5eb27ecd0939",
        "name": "Catalog CRUD",
        "style": {
            "label": true,
            "stroke": "#777777",
            "color": "#000000"
        },
        "nodes": [
            "d57f8f79c3c27284",
            "73d3298d3ac9a00f",
            "b0e2ad13d994deb5",
            "4a93982ce3167f0c",
            "08cc8814773fa602",
            "6e5705e00299e280",
            "ab9f99338797244a",
            "c5378fddcbfe3173",
            "6ffd7fdd529f522a",
            "cfdcffc5fe6aa003",
            "d462346832a8bd78",
            "8fe4ed02eb80ec23",
            "e0d616c079f71df7",
            "d87ac58ff208d258",
            "346eedad6705a880",
            "2b9b896dce289f54",
            "f7a1069c7f84a52f",
            "584c636d5b095956",
            "6ff1aa18ee822434",
            "11f583c6530c1750"
        ],
        "x": 14,
        "y": 19
    },
    {
        "id": "3d139b01bb821ed2",
        "type": "group",
        "z": "c5ed5eb27ecd0939",
        "name": "QR",
        "style": {
            "stroke": "#777777",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "0e474112ec70cfa4",
            "8dd6d240ae33eea2",
            "730b9d08426b727b",
            "35c7f143575edc9f",
            "2a8cf97667eae8c6",
            "919a819f7902e6b6",
            "0e6b11925dccbb2f",
            "ad809d7f68a14627",
            "f56583d8b6354a70",
            "6b4224fb33a7d8e5",
            "f4013730d3d4bb04",
            "0f1b980d517c1399",
            "f8807c23a4867488",
            "f6fdf12ab6f03422",
            "85d5d1a26b5f46a6",
            "38311d2abc255fc5",
            "168dfa0c984149e5",
            "f72a085e3723fe40",
            "4db2073f8297e628",
            "fc6c8d23ad45239f",
            "5d91b1b5f6ca9f10",
            "2a2c08de16f87b72",
            "4cb2e6f0238e75ab",
            "296304f5d3994425",
            "7c773fb9f8c43a0c"
        ],
        "x": 14,
        "y": 699
    },
    {
        "id": "fdcd76fba6995857",
        "type": "group",
        "z": "c5ed5eb27ecd0939",
        "name": "Actions page flows",
        "style": {
            "label": true,
            "stroke": "#777777",
            "color": "#000000"
        },
        "nodes": [
            "86e915b5bab35696",
            "1facf24a75b7b109",
            "3f97170620e4dcc1",
            "ac5ea0e76c4b0a18",
            "a8be0af9955db274",
            "ba9ea9149a108282",
            "26f968b1fd4f68a1",
            "2fb550cc6020417d",
            "36aff6f744dfe8f3",
            "85051c43e009e12d",
            "359b8938af68655a",
            "ef9298e409874ae5",
            "663d1df727f6d2ab",
            "c5d7a729af102cdd",
            "3e530fce9f7008fe",
            "505bfba4a6c720b7"
        ],
        "x": 14,
        "y": 439
    },
    {
        "id": "0468e97fade0cfd4",
        "type": "group",
        "z": "4ff433f9acd9e5d9",
        "name": "Components page",
        "style": {
            "stroke": "#ffff00",
            "label": true
        },
        "nodes": [
            "0580928042655d16",
            "82df4f80f92dcf41",
            "ac6237ff89b76278",
            "4afcc0f5ee5a89d3",
            "8d9ba7454230cd61",
            "9deb2eb96832b969",
            "6923b1297019b8b3",
            "ba59feae0698e9fc",
            "c200f4d125026248",
            "4369736a8634f18b",
            "541651911510ffeb",
            "c666447d1c8ba459",
            "50d9d61069191dd8",
            "ea61b4824f6ed19d",
            "14dd5f2547c5ebea",
            "346d7ab11d5bf8e1",
            "690d7334b5b8aac0",
            "ea97743c4ab6a019",
            "d68a4245a44629bd",
            "22a6f4681f3f3007",
            "10e50b958d0fae39",
            "e209405d3e0f74e8",
            "a5bc9516346a99c7",
            "da1a59944ad246f9",
            "4f93785c8ba7dcda",
            "664041e6a432fd1a",
            "0b1b07ac6f55f888",
            "b6c0298bf075dcd5",
            "82f1f876520b8eac",
            "69add05140ab2a2b",
            "37c1bd07d739e1bd",
            "20241c9dcfea87ef",
            "241f928b76090bf0",
            "ae843ef813dc8faa"
        ],
        "x": 54,
        "y": 59
    },
    {
        "id": "9f344bafb3f6006c",
        "type": "group",
        "z": "4ff433f9acd9e5d9",
        "name": "Box components",
        "style": {
            "stroke": "#0070c0",
            "label": true
        },
        "nodes": [
            "3d49f13f982f07d9",
            "ada0e829f7e0346b",
            "f92d6f6a6324a208",
            "6e0b6041da309aa7",
            "b5da99352e7516d0",
            "2992856063698338",
            "e22fbde51d93760d",
            "a4dbae0b2fdd7869",
            "2f71921073edd3dd",
            "10d971056992972a",
            "3e53561e15cba08c",
            "91a2ba6f187374ce",
            "5af9018cef42e04c",
            "51e2d75908856989",
            "60b89fb07f49363c"
        ],
        "x": 54,
        "y": 619
    },
    {
        "id": "b3ea098812b7c182",
        "type": "group",
        "z": "4a515ca629060193",
        "name": "Warehouse page",
        "style": {
            "stroke": "#6f2fa0",
            "label": true
        },
        "nodes": [
            "76541e2f2c020419",
            "c1b85776155556b1",
            "6df98d3f6dcce491",
            "84fcb5dbd0a55fa0",
            "d815fd989fb701a8",
            "55dd295e4f3f6439",
            "86d3454deebe1ba9",
            "18e3be66e1030f4c",
            "a3ce464e9b8877fb",
            "be3a6c3d103393dd",
            "83835081047e99c2",
            "ad4fa6a924d5cbcc",
            "9c05ea2ceba3d041",
            "c997ff3ea9eaa0f9",
            "04ce3001f961462b",
            "6db54ecf7c2efb84",
            "9eb9571f67d3f6f8",
            "1b5f0ad4fcc4015a",
            "7bfda4dfae117a69",
            "eaa9ea13b3dd976d"
        ],
        "x": 14,
        "y": 99
    },
    {
        "id": "bc5de473d17e7d01",
        "type": "group",
        "z": "c504bd7256b5c336",
        "name": "History page",
        "style": {
            "stroke": "#92d04f",
            "label": true
        },
        "nodes": [
            "a91f038e27c48af3",
            "fb11a27551af28bc",
            "cfcfa56710aefc60",
            "524d1ee4e7f11e66",
            "67ef33b433117304",
            "71dc6892e120306d",
            "7ab9fd1e4206863f",
            "4a11d0343eb3d2a8",
            "462aead38ca27ac6",
            "4dc2694662a63d94",
            "a1c82f7ec6f3438d",
            "2dcd8f386246c697",
            "5c7460173f1fe70f",
            "0272144832f15c94",
            "a6c358c02d19e8e1",
            "f6e61fe917fd9418",
            "4730c665c7f8c2b0",
            "6e0f4f314de463f3",
            "207bb7ab3ce4992f",
            "4997607767618523",
            "2d3277ba623254b6",
            "b2f87f8338c3fc76",
            "45768b897ff285f8",
            "98e3bb23f0bbdb30",
            "4e095c541c260212",
            "c35fe28c30af5848",
            "1da0c0f7285ddc18",
            "9b8683520a3bb12b",
            "5e7b1feaa9e975cb",
            "786a45fa317b7db4",
            "078e0847c5a0cfde",
            "e38dae267c077244",
            "8a95921dcb0477c8",
            "50cab4b486c4b832",
            "e70918fb8eb8117d",
            "af6a12851ad6b92a",
            "a1fe61728a76e058",
            "c1b8d920e18cad12",
            "e85e1e17d0de0df3",
            "a02ae6aa555d94c5",
            "36c32914167a862d",
            "c21d546b4bfb9d24",
            "dbee837126a08054",
            "b854b62c6d3ebe93",
            "f8485751b678c33b",
            "1845bdd1e6a0756a",
            "400c3d6a293a6b8e",
            "a4095938ed3b04b6",
            "e175d12d68401b0a",
            "63562d4cee594175",
            "a0c849de78c4bc5a",
            "4f5572a42d20ae0d",
            "124355806426d505",
            "091481a0393f6b54",
            "e7eef5fec85b200a",
            "0ae9eac7f7d3aa06",
            "fc5e77c2dfa59415",
            "593ccceb001ea032",
            "be5e8938bf0ce9c0",
            "d864e981ef0e0c07",
            "c48fcb29e42cc115",
            "7aab4fe964284f13",
            "2b7c352f5387da87",
            "afbb0ce57fe5129e"
        ],
        "x": 34,
        "y": 19
    },
    {
        "id": "fb37c28a5458cc2f",
        "type": "group",
        "z": "c504bd7256b5c336",
        "name": "create pdf ACT",
        "style": {
            "label": true
        },
        "nodes": [
            "da65feef95962489",
            "65f95263b33da0b7",
            "3f2169bfe88e0949",
            "f5e32587e3d58424",
            "d46208a6bdc8ff5c",
            "cf89c8c292353488",
            "e7990639b467c6b4",
            "b66755ed2a66fe4a",
            "b3f943838e30a761",
            "0b2889679d274d4e",
            "364a7bc93def9264",
            "6fcc735b232ebcde",
            "c25eaeea8280e9f7",
            "458ef9610cc8519f",
            "4cccba5fab6ce78a",
            "4a826ca39df63118"
        ],
        "x": 94,
        "y": 1279
    },
    {
        "id": "398457a4bc6d8725",
        "type": "group",
        "z": "1d597c33277dd321",
        "name": "Enit",
        "style": {
            "stroke": "#001f60",
            "fill": "#bfc7d7",
            "label": true
        },
        "nodes": [
            "1bbb86d99a93fe67",
            "09e9f7e9fdbe6a6f",
            "2269cb56c6676b8b",
            "cc7295b3dae36e5e",
            "4f52c83e5deddf43",
            "7ca8d20124e14b9d",
            "8fe5018c93da267e",
            "58542ee4de0beb46",
            "ecc5b14f9f1b9bcc",
            "bb13024505428c90",
            "e6cf594cd3ecaa1c",
            "ce0f0d6ea77b35aa",
            "201b9d6300656352",
            "4ff8460f70b4ddc3",
            "16f84cd6ade36c8c",
            "2955ebbdb5ea23df",
            "b247e19471935656",
            "ec28c6e22dfb61d3",
            "2f113294e97b1d54",
            "2b484cc175c77aa8",
            "dae0251585fe30ac",
            "0d440b3b54775148",
            "7379bd55f1219c1e",
            "8c1fa3b8e63f95fb",
            "6c9133719c6d90e5",
            "2cd98c7afab56662",
            "0736e1c9ae7432be",
            "d2abca3fe9e9cd96",
            "fda0591bfc9f6d11",
            "ed1771b2b561cded",
            "bd7173ef1f76f7dc",
            "356e25f4dfb8b8e0",
            "a8c73a02ead9c281",
            "a0b61ae534690f2b",
            "b11f2c4c71aa9091",
            "1150b7e9a28cb02e",
            "9ed42d5eef25f4c4",
            "3fac11d3944ea41d",
            "15d35cfb9791dd8c",
            "f82182f6297bc881",
            "913f34dbec2cfb9c",
            "a6c761097a3d5750",
            "9cbab5b73bde69cc",
            "980bd452eba989a4",
            "972b32c962e7faa8",
            "fa91a65821832965",
            "75318a32275ee07c",
            "b44facb04465b594",
            "f806dc70bda4bef3",
            "b487dfa5edf33483",
            "da0a9d20a6c9a958",
            "1a7c160be6b8121a",
            "c32ba1fc1c7b8c68",
            "b6131c19482133c5",
            "74d74bc7bf47dcd0",
            "021e5b163009f250",
            "c94837dcbf8c6159",
            "559470c78750a278",
            "6a6cfe56af37a136",
            "1026647a743ee174",
            "6345fb0aa23a3037"
        ],
        "x": 14,
        "y": 3699
    },
    {
        "id": "b0ef14992c694846",
        "type": "group",
        "z": "03b872fad46b157d",
        "name": "style",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "a186ba9dfbca2916",
            "781e82cf462af243",
            "8f8ca6e8d858b872"
        ],
        "x": 34,
        "y": 239,
        "w": 472,
        "h": 82
    },
    {
        "id": "1404e565686bad21",
        "type": "mongodb",
        "hostname": "${SERVICE-MONGO-HOST-NAME}",
        "topology": "direct",
        "connectOptions": "authSource=admin",
        "port": "27017",
        "db": "${SERVICE-MONGO-DB-NAME}",
        "name": "mongoDb"
    },
    {
        "id": "7b7dced66ebb9ed0",
        "type": "function",
        "z": "6a6d2afa5b0c7ec9",
        "name": "iconBook",
        "func": "msg.topic = \"iconBook\";\nmsg.payload = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoUlEQVR4nO2aMUrEQBSGpxBEVFCwEDyBegGvYLXgAcTKThsLz+Ap9CDqdouCmpD3T97bWCzoEVwtbJQJCYYVHZjdJBt4H6RIhiHvZ77JFC/GKB0jy7JFBk6Y6E6AsQBfbV4mhGEUbTEQt128TBOkWIk8BAMs1vaYedXUhK9QCQ3CSXJahhhF0ZqpmfqCEN3nk63tmQaoLYgQveUrUqNOzQTBFF+JADSID12RQFQtH6pWIKqWD1UrEFXLh6oViKrlQ9UKRNXyoWoFomr5ULUCUbV8qFqBqFo+VK15VQvAigDnAjwI8N65Ro+Uk4lGbRcvMwniWguuf2jtvohsmK4hPyGu+/3+gukqUgQZEm3/N+6bb9pGgE9XiGuKdjsI0bMrJE3TvU4HYeAi3yNA/DIYLHU2SJIk6wy8FmE4JToAsNm5IA630UvFJgur3ltrd4Xo0R2aGbAzOV69b/wcKYnjeJmBs6LvPv71eQaOJk78cfFsvoL8xa+XEF0K0VXtL541lRX5YOC4fD4kOqz+RWTmHQFumeip3BNV3J5xY0x001RB359tf1lSQYc1AAAAAElFTkSuQmCC`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 80,
        "wires": [
            [
                "ca71069b540375cf"
            ]
        ]
    },
    {
        "id": "7fa3ec8a83a8d6d4",
        "type": "function",
        "z": "6a6d2afa5b0c7ec9",
        "name": "iconWarehouse",
        "func": "msg.topic ='iconWarehouse';\nmsg.payload = `data:image/png;base64,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`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 180,
        "y": 140,
        "wires": [
            [
                "ca71069b540375cf"
            ]
        ]
    },
    {
        "id": "1fcb90eeabb6669e",
        "type": "function",
        "z": "6a6d2afa5b0c7ec9",
        "name": "iconSetting",
        "func": "msg.topic ='iconSetting';\nmsg.payload = `data:image/png;base64,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`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 200,
        "wires": [
            [
                "ca71069b540375cf"
            ]
        ]
    },
    {
        "id": "274a6cad091006d5",
        "type": "function",
        "z": "6a6d2afa5b0c7ec9",
        "name": "iconCoffee",
        "func": "msg.topic ='iconCoffee';\nmsg.payload = `data:image/png;base64,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`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 260,
        "wires": [
            [
                "ca71069b540375cf"
            ]
        ]
    },
    {
        "id": "30109da41244edcd",
        "type": "function",
        "z": "6a6d2afa5b0c7ec9",
        "name": "iconComponents",
        "func": "msg.topic ='iconComponents';\nmsg.payload = `data:image/png;base64,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`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 320,
        "wires": [
            [
                "ca71069b540375cf"
            ]
        ]
    },
    {
        "id": "3663c648f09ebc0d",
        "type": "function",
        "z": "6a6d2afa5b0c7ec9",
        "name": "iconWork",
        "func": "msg.topic ='iconWork';\nmsg.payload = `data:image/png;base64,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`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 380,
        "wires": [
            [
                "ca71069b540375cf"
            ]
        ]
    },
    {
        "id": "ca71069b540375cf",
        "type": "join",
        "z": "6a6d2afa5b0c7ec9",
        "name": "icons",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "2",
        "count": "7",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 470,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "3b31e145877a6685",
        "type": "function",
        "z": "6a6d2afa5b0c7ec9",
        "name": "iconSetup",
        "func": "msg.topic = 'iconSetup';\nmsg.payload = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFCklEQVR4nO2aW4hWVRTHj5dPo5mmbNKiKTMzLyNhETOaQg8FPRT40E2CAqPe6sFISMyCsItZ42XsqctLEgU9dIEoku5kL00GFlh0H0uCIB0nZ3LUXyz9b9ocz9n7nPOdKaf8wzAf31p7XfY5a+211v6S5CT+BwAeBw5zPEaAlclYAdBPPj5LxgKANuAIMARM8L4/Td8PAxOTEx3AorydB34Qbe6/Y11y1IgLgHuAqRG+22XsCxm010W7KSJjKrACOL8O233BFwO7ZcSvwHUB3ifEd38G7VHRHgqsvxr4WXwWa7PqcmKW58Re/bd3fQMwOcXbAN4Vz/UZsm4R7U0/fkSbpE0w2YZ9njMX1enE+wrYVcBBffc50AnMBJ4CfvOy03E7abHh0ffI8A5gDtDnpejVShofNu0McF7KiRaP1gV8LdqQlBsOAe8BtwXk3gl84u28ZbFBff4WWOjxtqac6ajiiAvaA8CZGXRT8px49gPrgLNLJo8tcsTwvD2FDL522WBYXsWRFuArCXgywLfAlJVW8Pf6Dv8ppAH0yIZd/ltRCsDligcrN65K/mEAV0r3SMjZosIe1I7sznrFRgvAGcCP0r2mDoETge0S+HItVhbT+6J0fpxO1c2mYRdwl9UiNKxviZdEZtYpeI5S6wAwpQD/fGAj8IVS66A+23fzC6yfrtg8UCYTFnHkGe3Q2gjfJKVUczoPRus13oisp8X/cF1OnKJy4WAozcqJbd4huQnoVhq3v4XAZu/c2BZyBpgtPgv48VUMPx24Qiew1VMfSeBbkXX2JAw/AZdEzh3XePVGZO4Q39vAeh3S3VkHp79oXaCzs3LixkhMHNKTyHUi5cyw1nQG+O4KvKK2YY9lLXI99h/ApyoZrEBcasEXMcyC2LAx5oS3xuLEsKFAC3GDtQVKyTu0YYbDWQscSuds4Eut7SqxxmLGsLPi2XYUWUSHcRUEW743tJZYY0WnYaCCvnHO2LodGajgiPUbhn2j5UhbE69Wd4UhRZVXqy3kyIiXoazBedUOQBsUxLozL9g3lzDGpeueCN9cYBnwCPAa8J3XlI1kLVhpIxzvwPJhC28ukH5t7YICTlwK/Fkg/d5NNoZl672xjNDp7cI7BQ9El077Q87ICddCbyp4IL7hvR3zKg34VKLsVYlyVoCv4ZUow3JskbJTq6qFLXoSiLcxaiVKMwWc6q3eSNE4ojqsUVDn2qQuaHfKlvFWp+3UGbNfn3tCMeFgE0avjJ+W1AUZ5sqCaC1Vg77F0mV9zOy6hE7WIM7wbC1Ci+ndKp19sd6lqEB7nw3f2KSxFiuL6W31hoDrmxV2jc6Q5scx1fR3KVbMhmurCpmm+azhvoiy3LRccEC3OEBfLRt+iV1p5AmwuxDD7zmjzCneyGZQ94bnlJA/Q4NvV0m8lJURVVe5W4AVVRyZ7nWMH/iVre4w+r1GzB9i28D71oDcOzKG2K4N6DfZqTgx3a4jrHbxY8Viypl2nQWum9wungt1ELprBTNyRs58zGGP+vBzJcMNAd3dS3vKiabvSHxn3FliAbgm47Km4SlfmiHLaiU3TEivnQA84N29DNV20ZO6Avhegq3EXxLgtd00rMqgWeEXLDs4ljx21X71lsouy4FTI3w2RjJszaC9ItqyiIwWjX7KX+yMQnnRl0GzpsgwLznRwbEB3xFls/Fj9gcDBq9xGrs/4fCmlnk/qslvT08i+e/gLx6eFfRUEBkkAAAAAElFTkSuQmCC`\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 420,
        "wires": [
            [
                "ca71069b540375cf"
            ]
        ]
    },
    {
        "id": "b31bfa80b11574dd",
        "type": "function",
        "z": "6a6d2afa5b0c7ec9",
        "name": "iconCategory",
        "func": "msg.topic = 'iconCategory';\n\nmsg.payload = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAADSklEQVR4nO2ZS0gVYRiGx6wsg8ICN4V0WXSxFpEboYvQDbpDRBQtiui2yEKhKApXSWlQSAmBFdWmKNpUdIG0i7lxEbURKhdq4KKwUIou1hN/zIm3UWf+mXPkzIHzwg8D53nf7/tgzpx//uM4WWWVPgE1QHuaVk0qB7lM+nQ5O4hXQDGwLE2reEBDWWWSgHzgQoat/KGG6SNz1AfkDDXIazJHr/xur9sCtgAnY7ZapL/bfoOcFvCSEzPx/w9zrR+4T8CnTswEPJP+9vqBKwTscmIm4L30t9wPnCHgb2CsExMBY4Bf0t90P3gk8EPg2U5MBMyRvn4Co4IMZuuc0BonJgLWSl/vbAyPxHDAiYmAg9LXQxtDvRjqIhYdAZQB1cA14CpwAlhiPouYWSd91dsYKsVwL0LBsoAdwitgcYTce5JRaWPYIIa2kMV2uV/EIBlmZ8jsNvFvsDHME8M321sBWAn0i9dc3wGOu+uu5/HZ7/tbMPBWNb0kNM8JEjDO/Q1JqMjCM9rztOsA5g/CLQA6hXsb+Bh1/vqKxGN6Gxc4iGvsFmOZBb9J+O/mme/DznWZhDZafu8S6rYawjU2/7NZ3MuezVzgqQdwRfiLFvxO4ZvDDKKFqi34J8Jvt+B3CN9kwVcLfyXMIFVivG7BvxB+iwW/VfgXFvx14avCDLJNjK0W/E3hT1nwtcLfsOBbhd8WZpBSMfZY8Poe8wEo8GEnAh+F32OR3yN8aZhBCvlfBQH8JOCz8I+B8YNwE4BG4T6ZwQKyCzy9FFoP4gb0irkk5KbOqAs4BCwEFrnX+mJkVG6RWyJ8b6gh3ICXErDZgs8JedhtdSYAbBbPyyiD3JKAo5YeM8wR4KvPAF+Aw0OeSXlkaov3lhNW5ukjAQ0hvVPc/dVz9xbrcq+PAZNDZjWEeSIOFrBHAhqdNAlokj52RwkwR/oJdQxLl3Z9dEofS6METJMAs/3OG5ZO/XvI82z9p0YJyfXsUmcOS7f+PcyS+uZ0JzdqkHlfSGhVyjsNrr9a6r9JJuiBBO1PaZd29cul/v1kgs5L0JmUdmlX/6zUP5dMUIUENafhj9BmqV+RzCDriY/WJTOIeb+Oi4qT/YO0PSYrP/IgWWXlRNYfZ2DBwB+EO2YAAAAASUVORK5CYII=`\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 480,
        "wires": [
            [
                "ca71069b540375cf"
            ]
        ]
    },
    {
        "id": "cc96d3977e7cdeb5",
        "type": "http in",
        "z": "03b872fad46b157d",
        "name": "",
        "url": "/changeAppName",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 60,
        "wires": [
            [
                "321e762ba6b9cb69"
            ]
        ]
    },
    {
        "id": "898906841e6ce522",
        "type": "http response",
        "z": "03b872fad46b157d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1070,
        "y": 60,
        "wires": []
    },
    {
        "id": "2cfbcee5e36355ae",
        "type": "link call",
        "z": "03b872fad46b157d",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 890,
        "y": 40,
        "wires": [
            [
                "898906841e6ce522"
            ]
        ]
    },
    {
        "id": "4512f251d7e979a5",
        "type": "function",
        "z": "03b872fad46b157d",
        "name": "function 409",
        "func": "msg.collection = \"appSettings\"\nif(msg.payload.length === 0) {\n\n    msg.payload = {\n        \"appName\": msg.oldpayload.appName,\n        deleted: false\n    }\n    return [msg, null]\n} else {\n    msg.query = {\n        _id: objectid(msg.payload[0]._id)\n    }\n\n    msg.payload = {\n        $set: {\n            \"appName\": msg.oldpayload.appName\n        }\n    }\n\n    return [null, msg]\n\n} ",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 690,
        "y": 60,
        "wires": [
            [
                "5e742890d99e993f",
                "2cfbcee5e36355ae"
            ],
            [
                "1d4b1718f43cf03e",
                "39a8dd83c5b11bc2"
            ]
        ]
    },
    {
        "id": "9dcd496597591d8b",
        "type": "http in",
        "z": "03b872fad46b157d",
        "name": "",
        "url": "/getAppName",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 120,
        "wires": [
            [
                "55bf121f4df2e3be"
            ]
        ]
    },
    {
        "id": "1e59b96a9d18085f",
        "type": "http response",
        "z": "03b872fad46b157d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 710,
        "y": 120,
        "wires": []
    },
    {
        "id": "56e9a4cdaa584bde",
        "type": "link call",
        "z": "03b872fad46b157d",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 530,
        "y": 120,
        "wires": [
            [
                "1e59b96a9d18085f",
                "c55210b8fbdd6b86"
            ]
        ]
    },
    {
        "id": "55bf121f4df2e3be",
        "type": "function",
        "z": "03b872fad46b157d",
        "name": "function 410",
        "func": "msg.collection = \"appSettings\"\nmsg.payload = {}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 120,
        "wires": [
            [
                "56e9a4cdaa584bde"
            ]
        ]
    },
    {
        "id": "c55210b8fbdd6b86",
        "type": "debug",
        "z": "03b872fad46b157d",
        "name": "debug 46",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 540,
        "y": 160,
        "wires": []
    },
    {
        "id": "433bd2a39e523be8",
        "type": "link call",
        "z": "03b872fad46b157d",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 510,
        "y": 60,
        "wires": [
            [
                "4512f251d7e979a5",
                "5e742890d99e993f"
            ]
        ]
    },
    {
        "id": "321e762ba6b9cb69",
        "type": "function",
        "z": "03b872fad46b157d",
        "name": "function 411",
        "func": "msg.collection = \"appSettings\"\nmsg.oldpayload = msg.payload\nmsg.payload = {}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 60,
        "wires": [
            [
                "433bd2a39e523be8"
            ]
        ]
    },
    {
        "id": "5e742890d99e993f",
        "type": "debug",
        "z": "03b872fad46b157d",
        "name": "debug 47",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 20,
        "wires": []
    },
    {
        "id": "2d80eddc1959f4ea",
        "type": "inject",
        "z": "03b872fad46b157d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 160,
        "wires": [
            [
                "55bf121f4df2e3be"
            ]
        ]
    },
    {
        "id": "a186ba9dfbca2916",
        "type": "http in",
        "z": "03b872fad46b157d",
        "g": "b0ef14992c694846",
        "name": "",
        "url": "/css",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 280,
        "wires": [
            [
                "8f8ca6e8d858b872"
            ]
        ]
    },
    {
        "id": "781e82cf462af243",
        "type": "http response",
        "z": "03b872fad46b157d",
        "g": "b0ef14992c694846",
        "name": "",
        "statusCode": "",
        "headers": {
            "content-type": "text/css"
        },
        "x": 430,
        "y": 280,
        "wires": []
    },
    {
        "id": "8f8ca6e8d858b872",
        "type": "template",
        "z": "03b872fad46b157d",
        "g": "b0ef14992c694846",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "css",
        "syntax": "mustache",
        "template": "@import url(\"https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap\");\n\n:root {\n  --main-color: #F2CB2F;\n  --main-color_text: #00000;\n  --button-color-hover: transparent;\n  --button-color-disabled: #cd99a7;\n  --border-radius-container: 8px;\n  --border-radius-button: 5px;\n  --box-shadow: 0px 10px 21px rgba(0, 0, 0, 0.16);\n}\n* {\n  font-family: \"Poppins\", sans-serif !important;\n    padding: 0 !important;\n}\nspan{\n  color: var(--main-color_text) !important;\n  transition: all 0.4s ease;\n}\n\n\nbody .fhLqEV {\n  background: #f2f5fb !important;\n  background: rgb(240, 240, 245) !important;\n\n}\n\n.menu {\n    background-color: #212b36!important;\n    bottom: 0 !important;\n    padding: 0 !important;\n    position: fixed !important;\n    top: 0 !important;\n    left:0!important;\n    z-index:2!important;\n    transition: margin .25s ease-out !important;\n  \n}\n} \n.menu_img {\n    top: 0!important;\n    transform: translateX(-60%);\n    right: auto!important;\n    border-bottom: 1px solid #CDCDCD !important;\n    padding-left:25px !important;\n    padding-bottom: 6px !important;\n}\n\n.menu__logo {\n      border-top: 1px solid #CDCDCD !important;\n      margin-right: 0 !important;\n      right: auto!important;\n      padding-left: 34px!important; \n      padding-top:3px!important;\n      color: white !important;  \n}\n\n}\n.menu_accordeon {\n    width: 100%!important;\n    overflow-y: scroll !important;\n    height: calc(100vh - 240px)!important;\n}\n\n.menu_accordeon .bp3-button {\n    background: transparent !important;\n    color:white!important;\n    font-weight: 500 !important;\n    font-family: 'Open Sans';\n    font-size: 18px !important;\n    padding: 16px 20px !important;\n    box-shadow: none !important;\n    justify-content: flex-start !important;\n    transition: all 0.3s ease !important;\n}\n\n.menu_accordeon .bp3-button-text{ \n    /* width: 15% !important; */\n   \n}\n\n.menu_accordeon .bp3-button-text img {\n    margin-left:10px !important;\n    width: 25px !important;\n    height: 25px !important;\n    color: white !important;\n}\n\n.menu_accordeon .bp3-button:hover img {\n    filter: invert(29%) sepia(97%) saturate(681%) hue-rotate(164deg) brightness(91%) contrast(93%) !important;\n}\n.anticon{\n padding-left: 15px!important;\n}\n\n.menu_accordeon .bp3-collapse-body>div {\n    background: transparent !important;\n    color: white;\n    font-weight: 500 !important;\n}\n\n.menu_accordeon .sub_category {\n    justify-content: flex-end !important;\n    font-size: 16px !important;\n    padding: 10px 30px 10px 0!important;\n}\n\n.bp3-collapse-body[aria-hidden=\"false\"] .anticon {\n    transform: rotate(90deg) !important;\n}\n\n.menu_accordeon .bp3-button:hover, .menu_accordeon .bp3-collapse-body>div:hover {\n    color: #7CC9E2 !important;\n}\n.active {\n    color: #7CC9E2 !important;\n}\n.active:after {\n    display: none!important;\n}\n}\n.menu_accordeon .bp3-button:hover .anticon {\n    transform: rotate(90deg) !important;\n}\n\n\n.menu_accordeon .CUSTOM_ACCORDION_WIDGET>div:nth-last-child(6) {\n    border-top: 1px solid #CDCDCD !important;\n    padding-top:4px !important;\n    /* width: 15% !important; */\n}\n.menu_accordeon .CUSTOM_ACCORDION_WIDGET>div{\n    /* width: 15% !important; */\n}\n\n/*Menu END*/\n \n/*HEADER*/\n.header{\n    position: fixed !important;\n    display:flex !important;\n    justify-content: center!important;\n    width: calc(100% + 0.9%)!important;\n    right: 0 !important;\n    top: 0 !important;\n    border-bottom: 2px solid #E0E0E0 !important;\n    padding: 20px 0px 20px 0!important;\n    background: #BDDAFF !important;\n}\n\n/* .header [type=\"CANVAS_WIDGET\"]{\n    width: calc(100% + 0.9%);\n} */\n\n.header .canvas{\n    height: 100% !important;\n     left:-4%!important; \n     right:0!important;\n}\n.header__page {\n     display:flex !important;\n    /* top: 50% !important;\n    transform: translateY(-55%);\n    right: auto!important;*/\n    left: 120px!important; \n}\n\n.header__user_icon {\n    display:flex !important;\nmargin-left: 30px !important;\n}\n.header__button{\n     display:flex !important;\n     margin-left: 50px !important;\n}\n.header__page span {\n    display:flex !important;\n    text-transform: uppercase !important;\n    font-size: 26px !important;\n    font-weight: 600 !important;\n    font-family: 'Open Sans';\n    line-height: 35px;\n    color: #27272E;\n    /* height:100%!important; */\n}\n\n\n.main_container {\n    width: calc(100vw - 250px)!important;\n    padding: 10px !important;\n    left:250px !important;\n}\n\n\n/*.navigation__wrap */ .rc-select-selector {\n    background: #FCFCFC !important;\n    border: 2px solid #EFEFEF !important;\n    border-radius: 12px !important;\n}\n/*.navigation__wrap */ .rc-select-selector:hover{\n    background: #F4F4F4 !important;\n}\n\n/*.navigation__wrap*/ .bp3-input{\n    background: #F4F4F4 !important;\n    border: 2px solid transparent !important;\n    border-radius: 12px !important;\n}\n\n.navigation__wrap .navSelect>div>div>div>div{\n    flex-direction: row-reverse;\n}\n.navigation__wrap .navSelect>div>div>div>div>div.label-container{\n    width: auto !important;\n    padding-left: 15px !important;\n    padding-right: 0px !important;\n    text-align: right;\n}\n\n.navigation__wrap .bp3-input{\n    /* width: 280px !important; */\n}\n.navigation__wrap .search_input .bp3-input{\n    padding-left: 23px !important;\n    /* width: 150px!important; */\n    /* right: 15px !important; */\n    background-image: url('images/search_field.png') !important;\n    background-repeat: no-repeat !important;\n    background-position:5% !important;\n    border:2px solid #e4e4e4 !important;\n    transition: all 0.4s ease;\n}\n\n.navigation__wrap .search_input .bp3-input:focus, \n.navigation__wrap .search_input .bp3-input:hover, \n.navigation__wrap .search_input .bp3-input:focus:focus{\n border: 2px solid #9A9FA5 !important;\n}\n\n.navigation__wrap .search_input .bp3-input::placeholder{\n    font-weight: 600;\n}\n\n.navigation__wrap.multiply .date_picker>div>div>div>div>div:first-child{\n    flex: 1 1 30% !important;\n}\n.navigation__wrap.multiply .date_picker>div>div>div>div>div:last-child{\n    flex: 1 1 70% !important;\n}\n.navigation__wrap.multiply .date_picker input{\n    max-width: none !important; \n    border:2px solid #e4e4e4 !important;\n    transition: all 0.4s ease;\n}\n\n.navigation__wrap .date_picker .bp3-input:focus, \n.navigation__wrap .date_picker .bp3-input:hover, \n.navigation__wrap .date_picker .bp3-input:focus:focus{\n border: 2px solid #9A9FA5 !important;\n}\n\n\n.tableMain>div>div>div>div>div:first-child .bp3-input{\n    background: #F4F4F4 !important;\n    border-radius: 0!important; \n}\n.navigation__wrap .select-button{\n    background: #FCFCFC !important;\n    border: 2px solid #EFEFEF !important;\n    border-radius: 12px !important;\n    flex-direction: row-reverse;\n}\n\n.navigation__wrap .select-button:hover{\n    background: #F4F4F4 !important;\n}\n.select-button{\n    background: #FCFCFC !important;\n    border: 2px solid #EFEFEF !important;\n    border-radius: 12px !important;\n    flex-direction: row-reverse;\n}\n\n\n.bp3-button{\n    transition: all 0.3s ease;\n    box-shadow: none !important;\n}\n\n.bp3-button:not(.menu_accordeon .bp3-button, .tableMain .bp3-button):hover{\n    background: none !important;\n    border: 2px solid #9A9FA5 !important;\n    box-shadow: none !important;\n}\n\n.bp3-popover-enter-done{\n    /*width: 404px !important;*/\n    border-radius: 0px 0px 12px 12px;\n}\n\n.bp3-popover-enter-done div{\n    max-width:100% !important;\n    transition: all 0.3s ease;\n}\n\n.bp3-popover.bp3-select-popover{\n    border-radius: 6px;\n    box-shadow: 0px 0px 1px rgba(12, 26, 75, 0.24), 0px 3px 8px -1px rgba(50, 50, 71, 0.05);\n    overflow:hidden;\n}\n.bp3-popover-enter-done .bp3-popover-content{\n    background: #FFFFFF;\n}\n\n\n/*.navigation__wrap*/.select-button .bp3-button-text{\n    text-align: end;\n}\n/*.navigation__wrap*/.label-container{\n    justify-content: end;\n     align-items: center;\n    padding-right: 2px !important;\n}\n\n.navigation__wrap .label-container{\n    width: 404px !important;\n}\n\n\n.navigation__wrap [type=\"CANVAS_WIDGET\"]{\n    display:flex;\n    align-items: center;\n    background:#EDF2F7;\n    width:100%!important;\n    padding: 7px !important;\n    border-radius: 4px !important;\n}\n\n.navigation__wrap.without_color [type=\"CANVAS_WIDGET\"]{\n    background:#FCFCFC;\n}\n\n.navigation__wrap [type=\"CANVAS_WIDGET\"]>div{\n    top: auto !important;\n    /* height: 40px !important;\n    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2)!important; */\n}\n\n.button_add{\n     height: 40px !important;\n    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2)!important; \n    color: #8BC34A !important; \n}\n\n.label-container{\n    align-items: flex-start !important;\n}\n\n.thead {\n  text-align: center!important;\n}\n.table .CUSTOM_TABLE_WIDGET .tableWrap{\n  direction: rtl!important;\n}\n.table .CUSTOM_TABLE_WIDGET  .tableWrap .table .thead .tr .header-reorder {\n    background: #FAFAFB!important;\n    border-right:none!important;\n    height:50px!important;\n    display:flex;\n    align-items: center;\n}\n\n.table .draggable-header>div>div>div{\n    display:flex !important;\n    justify-content: center !important;\n}\n\n.tableWrap .gIwmIY , .tableWrap .ezUIkT, .hHWrLU{\njustify-content: center !important}\n\n\n.form_input .bp3-input{\n    padding-left: 8px !important;\n}\n\n.select-popover-wrapper .bp3-input-group > .bp3-icon:first-child {\n    left: 230px !important;\n display: none !important;\n    top: 14px;\n    margin: 9px;\n}\n\n\n\n.bp3-popover-enter-done {\n    width: 404px !important;\n  }\n\n\n\n.t--widget-containerwidget>div>div>div>div>div>div{\nbackground-color: transparent !important;\n}\n\n.noActive>div>div>div>div>div>div{\n    background-color: transparent !important;\n    transition: all 0.3s ease !important; \n}\n.activSpan>div>div>div>div>div>div{\n    background-color: #9C27B0!important;\n\n}\n\ndiv>button.maneConteyner{\n   color: #9C27B0!important;\n}\n",
        "output": "str",
        "x": 280,
        "y": 280,
        "wires": [
            [
                "781e82cf462af243"
            ]
        ]
    },
    {
        "id": "1d4b1718f43cf03e",
        "type": "link call",
        "z": "03b872fad46b157d",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 900,
        "y": 80,
        "wires": [
            [
                "898906841e6ce522"
            ]
        ]
    },
    {
        "id": "39a8dd83c5b11bc2",
        "type": "debug",
        "z": "03b872fad46b157d",
        "name": "debug 48",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 880,
        "y": 120,
        "wires": []
    },
    {
        "id": "0580928042655d16",
        "type": "http in",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "url": "/createComponent",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 100,
        "wires": [
            [
                "82df4f80f92dcf41"
            ]
        ]
    },
    {
        "id": "82df4f80f92dcf41",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "create component",
        "func": "msg.collection = \"components\";\n\n\nmsg.payload = {\n    ...msg.payload,\n    category: objectid(msg.payload.category),\n    box: objectid(msg.payload.box),\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 450,
        "y": 100,
        "wires": [
            [
                "ac6237ff89b76278"
            ]
        ]
    },
    {
        "id": "ac6237ff89b76278",
        "type": "link call",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 630,
        "y": 100,
        "wires": [
            [
                "c200f4d125026248"
            ]
        ]
    },
    {
        "id": "4afcc0f5ee5a89d3",
        "type": "http response",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 950,
        "y": 100,
        "wires": []
    },
    {
        "id": "8d9ba7454230cd61",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "get component",
        "func": "msg.collection = \"components\";\n\nlet match = {};\n\nif (msg.req.query.category !== \"null\" && msg.req.query.category !== undefined) {\n    match.category =objectid(msg.req.query.category)\n}\nif (msg.req.query.article !== \"\" && msg.req.query.article !== undefined) {\n    match.article = { $regex: msg.req.query.article, $options: \"i\"}\n}\n \nif (msg.req.query.box !== \"\" && msg.req.query.box !== undefined) {\n    match.box = objectid(msg.req.query.box)\n}\n\n\n\n\nmsg.payload = [\n    {\n        $match:{\n            \"deleted\": false,\n        ...match}\n    },\n    {\n        $lookup: {\n            from: \"category\",\n            localField: \"category\",\n            foreignField: \"_id\",\n            as: \"category_info\"\n        }\n    },\n    {\n        $lookup: {\n            from: \"componentsBox\",\n            localField: \"box\",\n            foreignField: \"_id\",\n            as: \"box_info\"\n        }\n    }\n    \n\n   \n];\n\n\n\n\n\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 420,
        "y": 180,
        "wires": [
            [
                "9deb2eb96832b969",
                "0b1b07ac6f55f888"
            ]
        ]
    },
    {
        "id": "9deb2eb96832b969",
        "type": "link call",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "links": [
            "fc6ef6a3d58037f1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 650,
        "y": 180,
        "wires": [
            [
                "ba59feae0698e9fc",
                "241f928b76090bf0"
            ]
        ]
    },
    {
        "id": "6923b1297019b8b3",
        "type": "http response",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1030,
        "y": 180,
        "wires": []
    },
    {
        "id": "ba59feae0698e9fc",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "function 275",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 180,
        "wires": [
            [
                "6923b1297019b8b3",
                "241f928b76090bf0"
            ]
        ]
    },
    {
        "id": "c200f4d125026248",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 100,
        "wires": [
            [
                "4afcc0f5ee5a89d3"
            ]
        ]
    },
    {
        "id": "4369736a8634f18b",
        "type": "http in",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "url": "/updateComponent",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 260,
        "wires": [
            [
                "541651911510ffeb"
            ]
        ]
    },
    {
        "id": "541651911510ffeb",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "update component",
        "func": "msg.collection = \"components\";\n\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n}\nmsg.payload.category =  objectid(msg.payload.category)\nmsg.payload.box = objectid(msg.payload.box)\ndelete msg.payload._id\n\nmsg.payload = {\n    $set: msg.payload\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 450,
        "y": 260,
        "wires": [
            [
                "c666447d1c8ba459"
            ]
        ]
    },
    {
        "id": "c666447d1c8ba459",
        "type": "link call",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 640,
        "y": 260,
        "wires": [
            [
                "ea61b4824f6ed19d"
            ]
        ]
    },
    {
        "id": "50d9d61069191dd8",
        "type": "http response",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 930,
        "y": 260,
        "wires": []
    },
    {
        "id": "ea61b4824f6ed19d",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 260,
        "wires": [
            [
                "50d9d61069191dd8"
            ]
        ]
    },
    {
        "id": "14dd5f2547c5ebea",
        "type": "http in",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "url": "/deleteComponent",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 340,
        "wires": [
            [
                "346d7ab11d5bf8e1",
                "ae843ef813dc8faa"
            ]
        ]
    },
    {
        "id": "346d7ab11d5bf8e1",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "update component",
        "func": "msg.collection = \"components\";\n\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n}\n\nmsg.payload = {\n    $set: {\n        deleted: true\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 450,
        "y": 340,
        "wires": [
            [
                "690d7334b5b8aac0"
            ]
        ]
    },
    {
        "id": "690d7334b5b8aac0",
        "type": "link call",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 660,
        "y": 340,
        "wires": [
            [
                "d68a4245a44629bd"
            ]
        ]
    },
    {
        "id": "ea97743c4ab6a019",
        "type": "http response",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 950,
        "y": 340,
        "wires": []
    },
    {
        "id": "d68a4245a44629bd",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 340,
        "wires": [
            [
                "ea97743c4ab6a019"
            ]
        ]
    },
    {
        "id": "22a6f4681f3f3007",
        "type": "http in",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "url": "/getSingleComponent",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 420,
        "wires": [
            [
                "e209405d3e0f74e8"
            ]
        ]
    },
    {
        "id": "10e50b958d0fae39",
        "type": "http response",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 610,
        "y": 460,
        "wires": []
    },
    {
        "id": "e209405d3e0f74e8",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "find item",
        "func": "if (msg.req.query._id != \"null\"){\n    msg.collection = \"components\";\n    msg.payload = {\n        _id: objectid(msg.req.query._id)\n    }\n    return [msg, null]\n}else{\n    return [null, msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 400,
        "y": 420,
        "wires": [
            [
                "a5bc9516346a99c7"
            ],
            [
                "10e50b958d0fae39"
            ]
        ]
    },
    {
        "id": "a5bc9516346a99c7",
        "type": "link call",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 610,
        "y": 420,
        "wires": [
            [
                "4f93785c8ba7dcda"
            ]
        ]
    },
    {
        "id": "da1a59944ad246f9",
        "type": "http response",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 930,
        "y": 420,
        "wires": []
    },
    {
        "id": "4f93785c8ba7dcda",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "func": "msg.payload = msg.payload[0];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 420,
        "wires": [
            [
                "da1a59944ad246f9"
            ]
        ]
    },
    {
        "id": "664041e6a432fd1a",
        "type": "http in",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "url": "/getComponents",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 180,
        "wires": [
            [
                "8d9ba7454230cd61",
                "0b1b07ac6f55f888"
            ]
        ]
    },
    {
        "id": "0b1b07ac6f55f888",
        "type": "debug",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "debug 15",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 480,
        "y": 140,
        "wires": []
    },
    {
        "id": "b6c0298bf075dcd5",
        "type": "http in",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "url": "/createBox",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 540,
        "wires": [
            [
                "82f1f876520b8eac"
            ]
        ]
    },
    {
        "id": "82f1f876520b8eac",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "create component dox",
        "func": "msg.collection = \"componentsBox\";\n\nmsg.payload = {\n    ...msg.payload,\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 420,
        "y": 540,
        "wires": [
            [
                "69add05140ab2a2b"
            ]
        ]
    },
    {
        "id": "69add05140ab2a2b",
        "type": "link call",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 630,
        "y": 540,
        "wires": [
            [
                "20241c9dcfea87ef"
            ]
        ]
    },
    {
        "id": "37c1bd07d739e1bd",
        "type": "http response",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 910,
        "y": 540,
        "wires": []
    },
    {
        "id": "20241c9dcfea87ef",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 540,
        "wires": [
            [
                "37c1bd07d739e1bd"
            ]
        ]
    },
    {
        "id": "241f928b76090bf0",
        "type": "debug",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "debug 18",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 980,
        "y": 220,
        "wires": []
    },
    {
        "id": "ae843ef813dc8faa",
        "type": "debug",
        "z": "4ff433f9acd9e5d9",
        "g": "0468e97fade0cfd4",
        "name": "debug 19",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 540,
        "y": 380,
        "wires": []
    },
    {
        "id": "3d49f13f982f07d9",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "update box",
        "func": "msg.collection = \"componentsBox\";\n\nmsg.query = {\n    _id: objectid(msg.payload._id)\n}\n\ndelete msg.payload._id\n\nmsg.payload = {\n    $set: msg.payload\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 330,
        "y": 740,
        "wires": [
            [
                "ada0e829f7e0346b"
            ]
        ]
    },
    {
        "id": "ada0e829f7e0346b",
        "type": "link call",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 540,
        "y": 740,
        "wires": [
            [
                "6e0b6041da309aa7"
            ]
        ]
    },
    {
        "id": "f92d6f6a6324a208",
        "type": "http response",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 830,
        "y": 740,
        "wires": []
    },
    {
        "id": "6e0b6041da309aa7",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 740,
        "wires": [
            [
                "f92d6f6a6324a208"
            ]
        ]
    },
    {
        "id": "b5da99352e7516d0",
        "type": "http in",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "",
        "url": "/updateBox",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 740,
        "wires": [
            [
                "3d49f13f982f07d9"
            ]
        ]
    },
    {
        "id": "2992856063698338",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "update box",
        "func": "msg.collection = \"componentsBox\";\n\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n}\n\n\nmsg.payload = {\n    $set: {\n        deleted: true\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 350,
        "y": 820,
        "wires": [
            [
                "e22fbde51d93760d"
            ]
        ]
    },
    {
        "id": "e22fbde51d93760d",
        "type": "link call",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 540,
        "y": 820,
        "wires": [
            [
                "2f71921073edd3dd"
            ]
        ]
    },
    {
        "id": "a4dbae0b2fdd7869",
        "type": "http response",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 830,
        "y": 820,
        "wires": []
    },
    {
        "id": "2f71921073edd3dd",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 820,
        "wires": [
            [
                "a4dbae0b2fdd7869"
            ]
        ]
    },
    {
        "id": "10d971056992972a",
        "type": "http in",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "",
        "url": "/deleteBox",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 820,
        "wires": [
            [
                "2992856063698338"
            ]
        ]
    },
    {
        "id": "3e53561e15cba08c",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "get component box",
        "func": "msg.collection = \"componentsBox\";\n\nmsg.payload = {\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 660,
        "wires": [
            [
                "91a2ba6f187374ce"
            ]
        ]
    },
    {
        "id": "91a2ba6f187374ce",
        "type": "link call",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 570,
        "y": 660,
        "wires": [
            [
                "51e2d75908856989"
            ]
        ]
    },
    {
        "id": "5af9018cef42e04c",
        "type": "http response",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 930,
        "y": 660,
        "wires": []
    },
    {
        "id": "51e2d75908856989",
        "type": "function",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "function 299",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 660,
        "wires": [
            [
                "5af9018cef42e04c"
            ]
        ]
    },
    {
        "id": "60b89fb07f49363c",
        "type": "http in",
        "z": "4ff433f9acd9e5d9",
        "g": "9f344bafb3f6006c",
        "name": "",
        "url": "/getBox",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 660,
        "wires": [
            [
                "3e53561e15cba08c"
            ]
        ]
    },
    {
        "id": "d57f8f79c3c27284",
        "type": "http in",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "",
        "url": "/createCatalogItem",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 80,
        "wires": [
            [
                "346eedad6705a880",
                "f7a1069c7f84a52f"
            ]
        ]
    },
    {
        "id": "73d3298d3ac9a00f",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "deleted = false",
        "func": "msg.collection = \"catalog\";\nif (msg.payload.length <= 0 ){\n    msg.oldpayload.address = objectid(msg.oldpayload.address);\n    msg.oldpayload.category = objectid(msg.oldpayload.category);\n    msg.payload = {\n        ...msg.oldpayload,\n        deleted: false\n    }  \n    return [msg, null]\n}else{\nmsg.payload={\n    error: \"Sku is already exists\"\n}\n\nreturn[ null,msg]}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 560,
        "y": 80,
        "wires": [
            [
                "b0e2ad13d994deb5",
                "f7a1069c7f84a52f"
            ],
            [
                "6d97ebcc7af14bc5",
                "f7a1069c7f84a52f"
            ]
        ]
    },
    {
        "id": "b0e2ad13d994deb5",
        "type": "link call",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 750,
        "y": 60,
        "wires": [
            [
                "6ff1aa18ee822434"
            ]
        ]
    },
    {
        "id": "4a93982ce3167f0c",
        "type": "http in",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "",
        "url": "/getCatalogItems",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 180,
        "wires": [
            [
                "e0d616c079f71df7"
            ]
        ]
    },
    {
        "id": "08cc8814773fa602",
        "type": "link call",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "",
        "links": [
            "fc6ef6a3d58037f1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 610,
        "y": 180,
        "wires": [
            [
                "d87ac58ff208d258",
                "11f583c6530c1750"
            ]
        ]
    },
    {
        "id": "6e5705e00299e280",
        "type": "http response",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 970,
        "y": 180,
        "wires": []
    },
    {
        "id": "ab9f99338797244a",
        "type": "http in",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "",
        "url": "/deleteCatalogItem",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 240,
        "wires": [
            [
                "c5378fddcbfe3173"
            ]
        ]
    },
    {
        "id": "c5378fddcbfe3173",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "set deleted = true",
        "func": "msg.collection = \"catalog\"\n\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n}\n\nmsg.payload = {\n    $set: {\n        deleted: true\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 390,
        "y": 240,
        "wires": [
            [
                "6ffd7fdd529f522a"
            ]
        ]
    },
    {
        "id": "6ffd7fdd529f522a",
        "type": "link call",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 600,
        "y": 240,
        "wires": [
            [
                "c3627dac473df1df"
            ]
        ]
    },
    {
        "id": "cfdcffc5fe6aa003",
        "type": "http in",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "",
        "url": "/updateCatalogItem",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 340,
        "wires": [
            [
                "d462346832a8bd78"
            ]
        ]
    },
    {
        "id": "d462346832a8bd78",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "Update query",
        "func": "msg.collection = \"catalog\"\n\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n}\nmsg.payload.category = objectid(msg.payload.category)\nmsg.payload.address = objectid(msg.payload.address)\ndelete msg.payload._id\n\nmsg.payload = {\n    $set: msg.payload\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 380,
        "y": 340,
        "wires": [
            [
                "8fe4ed02eb80ec23"
            ]
        ]
    },
    {
        "id": "8fe4ed02eb80ec23",
        "type": "link call",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 580,
        "y": 340,
        "wires": [
            [
                "ffc0e3ba51fabdc5"
            ]
        ]
    },
    {
        "id": "86e915b5bab35696",
        "type": "http in",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "",
        "url": "/getSingleItem",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 480,
        "wires": [
            [
                "3f97170620e4dcc1"
            ]
        ]
    },
    {
        "id": "1facf24a75b7b109",
        "type": "http response",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 490,
        "y": 520,
        "wires": []
    },
    {
        "id": "3f97170620e4dcc1",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "find item",
        "func": "if(msg.payload._id != \"null\"){\n    msg.collection = \"catalog\";\n    msg.payload = [\n        {\n            $match: {\n                \"deleted\": false,\n                _id: objectid(msg.payload._id)\n            }\n        },\n        {\n            $lookup: {\n                from: \"warehouse\",\n                localField: \"address\",\n                foreignField: \"_id\",\n                as: \"warehouse_info\"\n            }\n        },\n        {\n            $lookup: {\n                from: \"category\",\n                localField: \"category\",\n                foreignField: \"_id\",\n                as: \"category_info\"\n            }\n        }\n\n\n\n    ];\n    return [msg, null]\n}else{\n    return [null, msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 320,
        "y": 480,
        "wires": [
            [
                "ac5ea0e76c4b0a18"
            ],
            [
                "1facf24a75b7b109"
            ]
        ]
    },
    {
        "id": "ac5ea0e76c4b0a18",
        "type": "link call",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "",
        "links": [
            "fc6ef6a3d58037f1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 530,
        "y": 480,
        "wires": [
            [
                "ba9ea9149a108282"
            ]
        ]
    },
    {
        "id": "a8be0af9955db274",
        "type": "http response",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 870,
        "y": 480,
        "wires": []
    },
    {
        "id": "ba9ea9149a108282",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "",
        "func": "msg.payload = msg.payload.map(e => {\n    return {\n        _id: e._id,\n        label: e.label,\n        model: e.model,\n        type: e.type,\n        serialNumber: e.serialNumber,\n        color: e.color,\n        sku: e.sku,\n        address: e.address,\n        category: e.category,\n        qr: e.qr,\n        more: e.more,\n        deleted: e.deleted,\n        status: e.status,\n        addressLabel: e.warehouse_info[0].warehouse,\n        addressWarehouse: e.warehouse_info[0].address,\n        categoryLabel: e.category_info[0].label,\n        isClient: e.isClient\n    }\n})\nmsg.payload = msg.payload[0]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 480,
        "wires": [
            [
                "a8be0af9955db274"
            ]
        ]
    },
    {
        "id": "26f968b1fd4f68a1",
        "type": "http in",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "",
        "url": "/getLastSku",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 560,
        "wires": [
            [
                "2fb550cc6020417d"
            ]
        ]
    },
    {
        "id": "2fb550cc6020417d",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "sort by sku",
        "func": "msg.collection = \"catalog\";\nmsg.payload = [\n    {\n        $match:{\n            deleted: false\n        }\n    },\n    {\n        $sort:{\n            sku: 1\n        }\n    }\n]\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 560,
        "wires": [
            [
                "36aff6f744dfe8f3"
            ]
        ]
    },
    {
        "id": "36aff6f744dfe8f3",
        "type": "link call",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "",
        "links": [
            "fc6ef6a3d58037f1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 510,
        "y": 560,
        "wires": [
            [
                "85051c43e009e12d"
            ]
        ]
    },
    {
        "id": "85051c43e009e12d",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "function 270",
        "func": "\nif(msg.payload.length > 0){\n    msg.payload = msg.payload[msg.payload.length - 1].sku;\n}else{\n    msg.payload = 'This item will be first'\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 560,
        "wires": [
            [
                "359b8938af68655a"
            ]
        ]
    },
    {
        "id": "359b8938af68655a",
        "type": "http response",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 850,
        "y": 560,
        "wires": []
    },
    {
        "id": "0e474112ec70cfa4",
        "type": "http in",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "url": "/generateQR",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 760,
        "wires": [
            [
                "730b9d08426b727b"
            ]
        ]
    },
    {
        "id": "8dd6d240ae33eea2",
        "type": "http response",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1490,
        "y": 800,
        "wires": []
    },
    {
        "id": "ef9298e409874ae5",
        "type": "http in",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "",
        "url": "/getItemBySku",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 620,
        "wires": [
            [
                "663d1df727f6d2ab"
            ]
        ]
    },
    {
        "id": "663d1df727f6d2ab",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "find element",
        "func": "msg.collection = \"catalog\";\nmsg.payload = [\n    {\n        $match:{\n            deleted: false,\n            sku: msg.payload.sku\n        }\n    },\n    {\n        $project:{\n            label:1,\n            model:1,\n            type:1,\n            serialNumber:1,\n            color:1,\n            sku:1,\n            address:1,\n            category:1,\n            more:1,\n            _id:0\n        }\n    }\n]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 620,
        "wires": [
            [
                "c5d7a729af102cdd"
            ]
        ]
    },
    {
        "id": "c5d7a729af102cdd",
        "type": "link call",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "",
        "links": [
            "fc6ef6a3d58037f1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 550,
        "y": 620,
        "wires": [
            [
                "3e530fce9f7008fe"
            ]
        ]
    },
    {
        "id": "3e530fce9f7008fe",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "formate payload",
        "func": "msg.payload = msg.payload[0]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 620,
        "wires": [
            [
                "505bfba4a6c720b7"
            ]
        ]
    },
    {
        "id": "505bfba4a6c720b7",
        "type": "http response",
        "z": "c5ed5eb27ecd0939",
        "g": "fdcd76fba6995857",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 930,
        "y": 620,
        "wires": []
    },
    {
        "id": "730b9d08426b727b",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "qr code input",
        "func": "msg.sku = msg.payload.sku\nmsg.qrcodeinput = env.get('nodeUrl') + '/getItemBySku?sku=' + `${msg.payload.sku}`\nmsg.link = env.get('nodeUrl') + '/getItemBySku?sku=' + `${msg.payload.sku}`\n\nmsg.collection = \"catalog\"\nmsg.payload = {\n    deleted: false,\n    sku: msg.payload.sku\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 760,
        "wires": [
            [
                "2a2c08de16f87b72"
            ]
        ]
    },
    {
        "id": "35c7f143575edc9f",
        "type": "qrcode-generator",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "qrtype": "text2qr",
        "text2qrText": "",
        "ssid": "",
        "hiddenssid": false,
        "wifitype": "",
        "phonenum": "",
        "smsphonenum": "",
        "smstext": "",
        "mailto": "",
        "mailsubject": "",
        "mailbody": "",
        "latitude": "",
        "longitude": "",
        "colorlight": "#ffffff",
        "colordark": "#000000",
        "printstatus": false,
        "x": 750,
        "y": 800,
        "wires": [
            [
                "2a8cf97667eae8c6"
            ]
        ]
    },
    {
        "id": "2a8cf97667eae8c6",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "write file",
        "func": "var base64Data = msg.payload.replace(/^data:image\\/\\w+;base64,/, \"\");\nmsg.payload = base64Data\n\nmsg.filename = `/data/catalog/${msg.sku}.png`\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 800,
        "wires": [
            [
                "ad809d7f68a14627"
            ]
        ]
    },
    {
        "id": "919a819f7902e6b6",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "formate payload",
        "func": "msg.payload = {\n    link: msg.link\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 800,
        "wires": [
            [
                "8dd6d240ae33eea2"
            ]
        ]
    },
    {
        "id": "0e6b11925dccbb2f",
        "type": "file",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "filename": "filename",
        "filenameType": "msg",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1180,
        "y": 800,
        "wires": [
            [
                "919a819f7902e6b6"
            ]
        ]
    },
    {
        "id": "ad809d7f68a14627",
        "type": "base64",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "action": "",
        "property": "payload",
        "x": 1040,
        "y": 800,
        "wires": [
            [
                "0e6b11925dccbb2f"
            ]
        ]
    },
    {
        "id": "f56583d8b6354a70",
        "type": "http in",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "url": "/getItemPageQR/:sku",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 860,
        "wires": [
            [
                "6b4224fb33a7d8e5"
            ]
        ]
    },
    {
        "id": "6b4224fb33a7d8e5",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "read file",
        "func": "msg.filename = `/data/catalog/${msg.req.params.sku}.png`\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 860,
        "wires": [
            [
                "f4013730d3d4bb04"
            ]
        ]
    },
    {
        "id": "f4013730d3d4bb04",
        "type": "file in",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "filename": "filename",
        "filenameType": "msg",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 480,
        "y": 860,
        "wires": [
            [
                "0f1b980d517c1399"
            ]
        ]
    },
    {
        "id": "0f1b980d517c1399",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "formate payload",
        "func": "msg.headers = {\n    'Content-Type': 'image/jpeg',\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 860,
        "wires": [
            [
                "f8807c23a4867488"
            ]
        ]
    },
    {
        "id": "f8807c23a4867488",
        "type": "http response",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 790,
        "y": 860,
        "wires": []
    },
    {
        "id": "f6fdf12ab6f03422",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "read file",
        "func": "msg.filename = `/data/catalog/${msg.req.params.sku}.png`\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 960,
        "wires": [
            [
                "85d5d1a26b5f46a6"
            ]
        ]
    },
    {
        "id": "85d5d1a26b5f46a6",
        "type": "file in",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "filename": "filename",
        "filenameType": "msg",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 520,
        "y": 960,
        "wires": [
            [
                "fc6c8d23ad45239f"
            ]
        ]
    },
    {
        "id": "38311d2abc255fc5",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "pdf",
        "func": "msg.payload = {\n    content: [\n        {\n            text: `SKU: ${msg.req.params.sku}`,\n            style: 'header',\n            margin: [0, 20, 0, 0]\n        },\n        {\n            image: `data:image/jpeg;base64,${msg.payload}`,\n            margin: [0, 10, 0, 0],\n            alignment: 'center',\n            width: 300,\n            height: 300\n        },\n        {\n            text: `Phone: `,\n            style: 'subheader',\n            margin: [0, 10, 0, 0]\n        }\n    ],\n    styles: {\n        header: {\n            fontSize: 26,\n            alignment: 'center',\n            bold: true,\n            margin: [0, 0, 0, 10]\n        },\n        subheader: {\n            fontSize: 16,\n            alignment: 'center',\n            margin: [0, 0, 0, 5]\n        }\n    }\n}\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 960,
        "wires": [
            [
                "4db2073f8297e628"
            ]
        ]
    },
    {
        "id": "168dfa0c984149e5",
        "type": "http response",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1230,
        "y": 960,
        "wires": []
    },
    {
        "id": "f72a085e3723fe40",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "formate payload",
        "func": "msg.headers = {\n    'Content-Disposition': `attachment; filename= \"${msg.req.params.sku}.pdf\"`,\n    'Content-Type': 'application/pdf'\n}\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 960,
        "wires": [
            [
                "168dfa0c984149e5",
                "7c773fb9f8c43a0c"
            ]
        ]
    },
    {
        "id": "4db2073f8297e628",
        "type": "pdfmake",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "outputType": "Buffer",
        "inputProperty": "payload",
        "options": "{}",
        "outputProperty": "payload",
        "x": 920,
        "y": 960,
        "wires": [
            [
                "f72a085e3723fe40"
            ]
        ]
    },
    {
        "id": "fc6c8d23ad45239f",
        "type": "base64",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "action": "",
        "property": "payload",
        "x": 660,
        "y": 960,
        "wires": [
            [
                "38311d2abc255fc5"
            ]
        ]
    },
    {
        "id": "5d91b1b5f6ca9f10",
        "type": "http in",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "url": "/downloadItemQrPDF/:sku",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 960,
        "wires": [
            [
                "f6fdf12ab6f03422"
            ]
        ]
    },
    {
        "id": "e0d616c079f71df7",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "to BD",
        "func": "msg.collection = \"catalog\";\nlet match = {};\n\nif (msg.req.query.category !== \"null\" && msg.req.query.category !== \"undefined\") {\n    match.category =objectid(msg.req.query.category)\n}\nif (msg.req.query.sku != \"\" && msg.req.query.sku!= \"undefined\") {\n    match.sku = { $regex: msg.req.query.sku, $options: \"i\" }\n}\nif (msg.req.query.model !== \"\" && msg.req.query.model !== \"undefined\") {\n    match.model = { $regex: msg.req.query.model, $options: \"i\" }\n}\n\nif (msg.req.query.warehouse !== \"\" && msg.req.query.warehouse !== \"undefined\" && msg.req.query.warehouse !== \"null\") {\n    match.address = msg.req.query.warehouse !== \"\" && msg.req.query.warehouse !== \"undefined\"? objectid(msg.req.query.warehouse): \"\"\n}\n\n\n\nmsg.payload = [\n    {\n        $match: {\n            \"deleted\": false,\n            ...match\n        }\n    },\n    {\n        $lookup: {\n            from: \"warehouse\",\n            localField: \"address\",\n            foreignField: \"_id\",\n            as: \"warehouse_info\"\n        }\n    },\n    {\n        $lookup: {\n            from: \"category\",\n            localField: \"category\",\n            foreignField: \"_id\",\n            as: \"category_info\"\n        }\n    }\n\n\n\n];\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 390,
        "y": 180,
        "wires": [
            [
                "08cc8814773fa602"
            ]
        ]
    },
    {
        "id": "d87ac58ff208d258",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "to App",
        "func": "msg.payload = msg.payload.map(e=>{\n    return {\n        _id: e._id,\n        label: e.label,\n        model: e.model,\n        type: e.type,\n        serialNumber: e.serialNumber,\n        color: e.color,\n        sku: e.sku,\n        address: e.address,\n        category: e.category,\n        qr: e.qr,\n        more: e.more,\n        deleted: e.deleted,\n        isClient:e.isClient,\n        addressLabel: e.warehouse_info[0].warehouse,\n        addressWarehouse: e.warehouse_info[0].address,\n        categoryLabel: e.category_info[0].label,\n        status: e.status,\n        categoryName: e.category_info[0].name\n\n    }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 180,
        "wires": [
            [
                "6e5705e00299e280",
                "11f583c6530c1750"
            ]
        ]
    },
    {
        "id": "2a2c08de16f87b72",
        "type": "link call",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 490,
        "y": 760,
        "wires": [
            [
                "4cb2e6f0238e75ab"
            ]
        ]
    },
    {
        "id": "4cb2e6f0238e75ab",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "function 281",
        "func": "if(msg.payload.length > 0){\n    msg.payload = {\n        success: false,\n        error: \"Item with this SKU already exist\"\n    }\n    return[msg,null]\n}else{\n    return[null,msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 760,
        "wires": [
            [
                "296304f5d3994425"
            ],
            [
                "35c7f143575edc9f"
            ]
        ]
    },
    {
        "id": "296304f5d3994425",
        "type": "http response",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "",
        "statusCode": "400",
        "headers": {},
        "x": 860,
        "y": 740,
        "wires": []
    },
    {
        "id": "6d97ebcc7af14bc5",
        "type": "http response",
        "z": "c5ed5eb27ecd0939",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 731.3333129882812,
        "y": 106.33332824707031,
        "wires": []
    },
    {
        "id": "346eedad6705a880",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "function 292",
        "func": "msg.oldpayload = msg.payload;\nmsg.collection = \"catalog\";\nmsg.payload = {\n    sku: msg.payload.sku\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 305,
        "y": 80,
        "wires": [
            [
                "2b9b896dce289f54"
            ]
        ],
        "l": false
    },
    {
        "id": "2b9b896dce289f54",
        "type": "link call",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 395,
        "y": 80,
        "wires": [
            [
                "73d3298d3ac9a00f"
            ]
        ],
        "l": false
    },
    {
        "id": "f7a1069c7f84a52f",
        "type": "debug",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "debug 36",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 140,
        "wires": []
    },
    {
        "id": "584c636d5b095956",
        "type": "http response",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1010,
        "y": 60,
        "wires": []
    },
    {
        "id": "6ff1aa18ee822434",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 890,
        "y": 60,
        "wires": [
            [
                "584c636d5b095956"
            ]
        ]
    },
    {
        "id": "c799923177a96d97",
        "type": "http response",
        "z": "c5ed5eb27ecd0939",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 890,
        "y": 220,
        "wires": []
    },
    {
        "id": "c3627dac473df1df",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 220,
        "wires": [
            [
                "c799923177a96d97"
            ]
        ]
    },
    {
        "id": "bba9ecb8afc53ced",
        "type": "http response",
        "z": "c5ed5eb27ecd0939",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 870,
        "y": 320,
        "wires": []
    },
    {
        "id": "ffc0e3ba51fabdc5",
        "type": "function",
        "z": "c5ed5eb27ecd0939",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 320,
        "wires": [
            [
                "bba9ecb8afc53ced"
            ]
        ]
    },
    {
        "id": "11f583c6530c1750",
        "type": "debug",
        "z": "c5ed5eb27ecd0939",
        "g": "b5989844a1ca69ed",
        "name": "debug 44",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 140,
        "wires": []
    },
    {
        "id": "7c773fb9f8c43a0c",
        "type": "debug",
        "z": "c5ed5eb27ecd0939",
        "g": "3d139b01bb821ed2",
        "name": "debug 45",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1180,
        "y": 900,
        "wires": []
    },
    {
        "id": "8b652fdd647781e8",
        "type": "link in",
        "z": "7f99d43ecb62a74e",
        "name": "mongo Find",
        "links": [],
        "x": 245,
        "y": 140,
        "wires": [
            [
                "a2018245ce0429a9"
            ]
        ]
    },
    {
        "id": "fc6ef6a3d58037f1",
        "type": "link in",
        "z": "7f99d43ecb62a74e",
        "name": "mongo Aggregate",
        "links": [],
        "x": 245,
        "y": 200,
        "wires": [
            [
                "4daddbce3380a5d9"
            ]
        ]
    },
    {
        "id": "30dba71c3351cb34",
        "type": "link in",
        "z": "7f99d43ecb62a74e",
        "name": "mongo Insert",
        "links": [],
        "x": 255,
        "y": 320,
        "wires": [
            [
                "0bc440871307c09f",
                "c44e91392e3bbfa9"
            ]
        ]
    },
    {
        "id": "2bc8f715aab4e1d1",
        "type": "link in",
        "z": "7f99d43ecb62a74e",
        "name": "mongo Update",
        "links": [],
        "x": 255,
        "y": 360,
        "wires": [
            [
                "095e4eeb7e650e11",
                "426f0ec8fa3ad649"
            ]
        ]
    },
    {
        "id": "9f54c85a351e0d50",
        "type": "link out",
        "z": "7f99d43ecb62a74e",
        "name": "link out 1",
        "mode": "return",
        "links": [],
        "x": 575,
        "y": 140,
        "wires": []
    },
    {
        "id": "eb7766b923f2cb35",
        "type": "link out",
        "z": "7f99d43ecb62a74e",
        "name": "link out 2",
        "mode": "return",
        "links": [],
        "x": 575,
        "y": 200,
        "wires": []
    },
    {
        "id": "c44e91392e3bbfa9",
        "type": "link out",
        "z": "7f99d43ecb62a74e",
        "name": "link out 4",
        "mode": "return",
        "links": [],
        "x": 405,
        "y": 280,
        "wires": []
    },
    {
        "id": "426f0ec8fa3ad649",
        "type": "link out",
        "z": "7f99d43ecb62a74e",
        "name": "link out 5",
        "mode": "return",
        "links": [],
        "x": 405,
        "y": 400,
        "wires": []
    },
    {
        "id": "0bc440871307c09f",
        "type": "mongodb out",
        "z": "7f99d43ecb62a74e",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 390,
        "y": 320,
        "wires": []
    },
    {
        "id": "095e4eeb7e650e11",
        "type": "mongodb out",
        "z": "7f99d43ecb62a74e",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "update",
        "x": 390,
        "y": 360,
        "wires": []
    },
    {
        "id": "a2018245ce0429a9",
        "type": "mongodb in",
        "z": "7f99d43ecb62a74e",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "",
        "operation": "find",
        "x": 390,
        "y": 140,
        "wires": [
            [
                "9f54c85a351e0d50"
            ]
        ]
    },
    {
        "id": "4daddbce3380a5d9",
        "type": "mongodb in",
        "z": "7f99d43ecb62a74e",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "",
        "operation": "aggregate",
        "x": 390,
        "y": 200,
        "wires": [
            [
                "eb7766b923f2cb35"
            ]
        ]
    },
    {
        "id": "41e2ccc8bf04ea8f",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "func": "msg.collection = \"admin_roles\";\n\nmsg.payload={\n    name:msg.payload.name,\n    deleted:false,\n    permissions: [],\n    createdAt: new Date((new Date().toISOString()))\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 260,
        "y": 1420,
        "wires": [
            [
                "2deb169266566691",
                "8462ed8ac6a580a5"
            ]
        ]
    },
    {
        "id": "f5cd06d26d9cecab",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "createRole",
        "url": "/createRole",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 1420,
        "wires": [
            [
                "41e2ccc8bf04ea8f"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "2deb169266566691",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 410,
        "y": 1440,
        "wires": []
    },
    {
        "id": "d599dc13851a983a",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "getRoles",
        "url": "/getRoles",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 1200,
        "wires": [
            [
                "8449b373e28d64c6"
            ]
        ]
    },
    {
        "id": "067df7e34de9936a",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 590,
        "y": 1200,
        "wires": []
    },
    {
        "id": "fa4dca1eb36ee367",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "addModuleToRole",
        "url": "/addModuleToRole",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 1560,
        "wires": [
            [
                "699f57ed38678213",
                "ca3803c8cc78092c"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "887b5cae6102c679",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 470,
        "y": 1580,
        "wires": []
    },
    {
        "id": "699f57ed38678213",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "func": "msg.collection = \"admin_roles\";\n\nlet crud = {\n    \"canCreate\": false,\n    \"canRead\": false,\n    \"canEdit\": false,\n    \"canRemove\": false\n}\n\nmsg.payload.options.map(e => {\n    if (e == \"C\") {\n        crud.canCreate = true\n    }\n    else if (e == \"R\") {\n        crud.canRead = true\n    }\n    else if (e == \"U\") {\n        crud.canEdit = true\n    } else if (e == \"D\") {\n        crud.canRemove = true\n    }\n})\n\n\nlet modules = msg.payload.moduleName.map((name, index)=> {\n    return {\n        \"name\": name,\n        \"value\": msg.payload.moduleValue[index]\n    }\n\n})\n\nlet preparedModules\n = modules.map(item => {\n    return{\n        module: item.name,\n        moduleId: objectid(item.value),\n        ...crud\n    }\n})\n\nmsg.query={\n    \"_id\":objectid(msg.payload._id)\n}\n\nmsg.payload={\n    $push: {\n        permissions: {\n            $each: [...preparedModules]\n        }\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 320,
        "y": 1560,
        "wires": [
            [
                "887b5cae6102c679",
                "fb5d683ad018286c"
            ]
        ]
    },
    {
        "id": "8462ed8ac6a580a5",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 430,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "8449b373e28d64c6",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "func": "msg.collection=\"admin_roles\"\nmsg.payload={\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 260,
        "y": 1200,
        "wires": [
            [
                "4ad501803f507d46"
            ]
        ]
    },
    {
        "id": "4ad501803f507d46",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 430,
        "y": 1200,
        "wires": [
            [
                "067df7e34de9936a",
                "bf96be30b0877388"
            ]
        ]
    },
    {
        "id": "fb5d683ad018286c",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 520,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "cae9a4e3f712fac7",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "func": "msg.collection =\"admin_roles\"\n\nmsg.query={\n    _id: objectid(msg.payload._id)\n}\n\nmsg.payload={\n    $set:{\n        name: msg.payload.name\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 280,
        "y": 1680,
        "wires": [
            [
                "165bf0af6d90722c",
                "7f9fe017cf21e629"
            ]
        ]
    },
    {
        "id": "28ba59c6d2ce6116",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "updateRole",
        "url": "/updateRole",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 1680,
        "wires": [
            [
                "cae9a4e3f712fac7"
            ]
        ],
        "icon": "font-awesome/fa-edit"
    },
    {
        "id": "165bf0af6d90722c",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "10",
        "x": 480,
        "y": 1660,
        "wires": [
            []
        ]
    },
    {
        "id": "7f9fe017cf21e629",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 430,
        "y": 1700,
        "wires": []
    },
    {
        "id": "0f67d839d08d8474",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "deleteModuleFromRole",
        "url": "/deleteModuleFromRole",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 1940,
        "wires": [
            [
                "f28d4c1dc58b6d48"
            ]
        ],
        "icon": "font-awesome/fa-remove"
    },
    {
        "id": "f28d4c1dc58b6d48",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "func": "msg.collection = \"admin_roles\";\n\nmsg.query = {\n   \"_id\": objectid(msg.payload._id)\n};\n\nconst deleteModulesId = msg.payload.moduleId.map(i => objectid(i));\n\nmsg.payload = {\n    $pull: {\n        permissions: {\n            moduleId: {\n                $in: deleteModulesId\n            }\n        }\n    }\n}\n\n// msg.payload = {\n//     $pull: {\n//         \"permissions\": {\n//             \"moduleId\": objectid(msg.payload.moduleId)\n//         }\n//     }\n// }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 340,
        "y": 1940,
        "wires": [
            [
                "e8e7e0b556bf4851",
                "5593907067faab18",
                "8fbf6d10cd3030c3"
            ]
        ]
    },
    {
        "id": "e8e7e0b556bf4851",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 540,
        "y": 1980,
        "wires": [
            []
        ]
    },
    {
        "id": "07491bef43746354",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "deleteRole",
        "url": "/deleteRole",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 1800,
        "wires": [
            [
                "d0e1a24df9177e3c"
            ]
        ],
        "icon": "font-awesome/fa-remove"
    },
    {
        "id": "d0e1a24df9177e3c",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "func": "msg.collection =\"admin_roles\"\n\nmsg.query={\n    _id: objectid(msg.payload._id)\n}\n\nmsg.payload={\n    $set:{\n        deleted: true\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 260,
        "y": 1800,
        "wires": [
            [
                "05b72b3a47176e41",
                "7a65b261135e25a3"
            ]
        ]
    },
    {
        "id": "7a65b261135e25a3",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 410,
        "y": 1820,
        "wires": []
    },
    {
        "id": "05b72b3a47176e41",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 460,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "5593907067faab18",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 490,
        "y": 1940,
        "wires": []
    },
    {
        "id": "8fbf6d10cd3030c3",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 490,
        "y": 1900,
        "wires": []
    },
    {
        "id": "ca3803c8cc78092c",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 310,
        "y": 1520,
        "wires": []
    },
    {
        "id": "01358c3f0ebbc277",
        "type": "inject",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 1160,
        "wires": [
            [
                "8449b373e28d64c6"
            ]
        ]
    },
    {
        "id": "bf96be30b0877388",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "all Roles",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 600,
        "y": 1160,
        "wires": []
    },
    {
        "id": "f84463bd78973e65",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "get roles",
        "func": "msg.collection = \"admin_roles\"\nlet match = {};\nif (msg.payload.name != \",\" && msg.payload.name) {\n    match = {\n        name: { $regex: msg.payload.name, $options: \"i\" }\n    }\n}\n\nmsg.payload = {\n    deleted: false, \n    ...match\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 1320,
        "wires": [
            [
                "2cd74eb4124239c9"
            ]
        ]
    },
    {
        "id": "2cd74eb4124239c9",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 450,
        "y": 1320,
        "wires": [
            [
                "8cfbefe159b617bb",
                "4b3e55b0402a8b5b"
            ]
        ]
    },
    {
        "id": "4b3e55b0402a8b5b",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "all roles",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 620,
        "y": 1280,
        "wires": []
    },
    {
        "id": "8cfbefe159b617bb",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 610,
        "y": 1320,
        "wires": []
    },
    {
        "id": "cea81a4f3aaba9d1",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "getAllRoles",
        "url": "/getAllRoles",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 1320,
        "wires": [
            [
                "f84463bd78973e65"
            ]
        ],
        "info": "Use in: User Management"
    },
    {
        "id": "9ea85d07af9014cc",
        "type": "inject",
        "z": "1d597c33277dd321",
        "g": "7316be74670df481",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 1280,
        "wires": [
            [
                "f84463bd78973e65"
            ]
        ]
    },
    {
        "id": "60168f0b6359e80b",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "createParentModule",
        "url": "/createParentModule",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 2260,
        "wires": [
            [
                "6424d65c3cce4564",
                "8587475a13f0b00c"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "d25495d563753d1b",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 510,
        "y": 2220,
        "wires": []
    },
    {
        "id": "6424d65c3cce4564",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "func": "msg.collection = \"admin_modules\"\n\nmsg.payload = {\n    ...msg.payload,\n    deleted: false,\n    isParent: false\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 2260,
        "wires": [
            [
                "c9a0b0c5df2594d1",
                "d25495d563753d1b"
            ]
        ]
    },
    {
        "id": "7c21bf0c8afe1df6",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "getModules",
        "url": "/getModules",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 2140,
        "wires": [
            [
                "1be16a6d1e8b0928"
            ]
        ]
    },
    {
        "id": "a7a72ff6ca718b38",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 630,
        "y": 2140,
        "wires": []
    },
    {
        "id": "1be16a6d1e8b0928",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "func": "msg.collection=\"admin_modules\"\nmsg.payload={\n    deleted:false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 2140,
        "wires": [
            [
                "b0d4ba6ae94a791a"
            ]
        ]
    },
    {
        "id": "c86d14e43a6806aa",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "createChildModule",
        "url": "/createChildModule",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 2660,
        "wires": [
            [
                "b35cbcf50d96c3a2"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "24199a89aa5cfb3e",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 510,
        "y": 2660,
        "wires": []
    },
    {
        "id": "b35cbcf50d96c3a2",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "query",
        "func": "msg.collection = \"admin_modules\";\n\nif (msg.payload.parentModule) {\n    msg.query={\n        \"_id\": objectid(msg.payload.parentModule)\n    };\n\n    msg.payload = {\n        $addToSet: {\n            childModules: {\n                name: msg.payload.childModule,\n                page_id: msg.payload.childModule,\n                position: msg.payload.position\n            }\n        },\n        $set: {\n            isParent: true\n        }\n    }\n\n    return [msg,];\n} else {\n    \n    \n    msg.payload={\n        ...msg.payload,\n        deleted: false,\n        isParent: false\n    }\n    return [,msg];\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 350,
        "y": 2660,
        "wires": [
            [
                "507eb68f361f400f",
                "24199a89aa5cfb3e"
            ],
            [
                "6bf6dd45d786a728",
                "24199a89aa5cfb3e"
            ]
        ]
    },
    {
        "id": "c1ec694d4341700a",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "deleteChildModule",
        "url": "/deleteChildModule",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 2940,
        "wires": [
            [
                "bc954f266a2b838a",
                "4b74e0911da68811"
            ]
        ],
        "icon": "font-awesome/fa-remove"
    },
    {
        "id": "bc954f266a2b838a",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "query",
        "func": "msg.collection=\"admin_modules\";\n\nmsg.query = {\n    \"_id\": objectid(msg.payload._id)\n};\n\nmsg.payload = {\n    $pull: {\n        \"childModules\": {\n            \"name\": msg.payload.childModule_id\n        }\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 350,
        "y": 2940,
        "wires": [
            [
                "2b0d4b88b690c64f",
                "5ed2ac4477524bb6"
            ]
        ]
    },
    {
        "id": "5ed2ac4477524bb6",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 510,
        "y": 2900,
        "wires": []
    },
    {
        "id": "b0d4ba6ae94a791a",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 470,
        "y": 2140,
        "wires": [
            [
                "a7a72ff6ca718b38",
                "db371df8989b02fd"
            ]
        ]
    },
    {
        "id": "2b0d4b88b690c64f",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 540,
        "y": 2940,
        "wires": [
            []
        ]
    },
    {
        "id": "6bf6dd45d786a728",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 530,
        "y": 2700,
        "wires": [
            []
        ]
    },
    {
        "id": "507eb68f361f400f",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 540,
        "y": 2620,
        "wires": [
            []
        ]
    },
    {
        "id": "c9a0b0c5df2594d1",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 530,
        "y": 2260,
        "wires": [
            []
        ]
    },
    {
        "id": "f3d54849a48f673a",
        "type": "inject",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 2100,
        "wires": [
            [
                "1be16a6d1e8b0928"
            ]
        ]
    },
    {
        "id": "4b74e0911da68811",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "came",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 350,
        "y": 2900,
        "wires": []
    },
    {
        "id": "c04943723ded000b",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "came",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 350,
        "y": 2780,
        "wires": []
    },
    {
        "id": "326e3f9f33aceecc",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 560,
        "y": 2820,
        "wires": [
            []
        ]
    },
    {
        "id": "76776dde6b952f67",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "updateChildModule",
        "url": "/updateChildModule",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 2820,
        "wires": [
            [
                "dd3ceb6826a119a4",
                "c04943723ded000b"
            ]
        ],
        "icon": "font-awesome/fa-edit"
    },
    {
        "id": "dd3ceb6826a119a4",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "query",
        "func": "msg.collection = \"admin_modules\";\n\nmsg.query = {\n    \"_id\": objectid(msg.payload._id),\n    \"childModules.name\": msg.payload.name\n};\n\nmsg.payload = {\n    $set: {\n        \"childModules.$.position\": msg.payload.position\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 350,
        "y": 2820,
        "wires": [
            [
                "326e3f9f33aceecc",
                "cb9899b16112bf52"
            ]
        ]
    },
    {
        "id": "cb9899b16112bf52",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 530,
        "y": 2780,
        "wires": []
    },
    {
        "id": "8587475a13f0b00c",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "came",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 350,
        "y": 2220,
        "wires": []
    },
    {
        "id": "db371df8989b02fd",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "all modules",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 2100,
        "wires": []
    },
    {
        "id": "d6514bbe71e65095",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "delete user query",
        "func": "msg.collection = \"admins\"\n\nmsg.query = {\n    \"_id\": objectid(msg.payload._id)\n};\n\nmsg.payload = {\n    $set: { \"deleted\": true }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 350,
        "y": 3380,
        "wires": [
            [
                "a38866e4c1e1d31c",
                "09af9c4093cde20e",
                "781c1955fba3c961"
            ]
        ]
    },
    {
        "id": "ddbb2aa3488ec794",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "get users query",
        "func": "msg.collection = \"admins\";\n\nmsg.payload=[\n    {\n      $match:{\n        deleted:false\n      }\n    },\n    {\n      $lookup: {\n       \"from\": \"admin_roles\",\n       \"localField\": \"roles\",\n       \"foreignField\":\"_id\",\n       \"as\": \"role_items\"\n     }\n    }\n]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 3100,
        "wires": [
            [
                "2517b98b225f0bfc"
            ]
        ]
    },
    {
        "id": "53e691dbd1ccc129",
        "type": "inject",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 3060,
        "wires": [
            [
                "ddbb2aa3488ec794"
            ]
        ]
    },
    {
        "id": "83201a8a5c461bf9",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "getUsers",
        "url": "/getUsers",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 3100,
        "wires": [
            [
                "ddbb2aa3488ec794"
            ]
        ]
    },
    {
        "id": "2517b98b225f0bfc",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "links": [
            "fc6ef6a3d58037f1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 530,
        "y": 3100,
        "wires": [
            [
                "914b5444373ac979",
                "cb0dd564c0afc3fb"
            ]
        ]
    },
    {
        "id": "914b5444373ac979",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 710,
        "y": 3100,
        "wires": []
    },
    {
        "id": "cb0dd564c0afc3fb",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "all users",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 720,
        "y": 3060,
        "wires": []
    },
    {
        "id": "d9ee28c0b21412cf",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "editUserRole",
        "url": "/editUserRole",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 3220,
        "wires": [
            [
                "763eb79b3dbfb659"
            ]
        ],
        "icon": "font-awesome/fa-edit"
    },
    {
        "id": "763eb79b3dbfb659",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "edit role query",
        "func": "msg.collection = \"admins\";\n\nmsg.query = {\n    \"_id\": objectid(msg.payload.id)\n}\n\nmsg.payload = {\n    $set: {\n        \"roles\": [objectid(msg.payload.role)]\n   \n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 340,
        "y": 3220,
        "wires": [
            [
                "c7bbf146e6a8bd40",
                "d3788030f7e71fd5",
                "14b86e0dbc9b7eca"
            ]
        ]
    },
    {
        "id": "d3788030f7e71fd5",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 560,
        "y": 3180,
        "wires": [
            []
        ]
    },
    {
        "id": "c7bbf146e6a8bd40",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 510,
        "y": 3220,
        "wires": []
    },
    {
        "id": "14b86e0dbc9b7eca",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "user role edited",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 540,
        "y": 3260,
        "wires": []
    },
    {
        "id": "6298224e69af4a5a",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "deleteUser",
        "url": "/deleteUser",
        "method": "delete",
        "upload": true,
        "swaggerDoc": "",
        "x": 100,
        "y": 3380,
        "wires": [
            [
                "d6514bbe71e65095"
            ]
        ],
        "icon": "font-awesome/fa-remove"
    },
    {
        "id": "a38866e4c1e1d31c",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "deleteUser msg to DB",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 3420,
        "wires": []
    },
    {
        "id": "781c1955fba3c961",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 530,
        "y": 3380,
        "wires": []
    },
    {
        "id": "09af9c4093cde20e",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 580,
        "y": 3340,
        "wires": [
            []
        ]
    },
    {
        "id": "1962c67b0b4ea952",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "createUser",
        "url": "/createUser",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 3560,
        "wires": [
            [
                "9ae9dacd29388d9c",
                "dccbb9c0a6def363"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "9ae9dacd29388d9c",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "query",
        "func": "msg.collection = \"admins\";\nmsg.oldpayload = msg.payload;\n\nmsg.payload = {\n    email: msg.payload.email,\n    deleted: false\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 3560,
        "wires": [
            [
                "6cdd3684e7e6eae2",
                "fccade1ca44220e1"
            ]
        ]
    },
    {
        "id": "dccbb9c0a6def363",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 310,
        "y": 3600,
        "wires": []
    },
    {
        "id": "6cdd3684e7e6eae2",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 470,
        "y": 3560,
        "wires": [
            [
                "b46c377eeb301892",
                "aac6543e13b37cf1"
            ]
        ]
    },
    {
        "id": "fccade1ca44220e1",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "msg to db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 460,
        "y": 3520,
        "wires": []
    },
    {
        "id": "b46c377eeb301892",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "check",
        "func": "if (msg.payload.length > 0) {\n    msg.payload = {\n        data: \"This email address already exists\",\n        code: 400,\n    }\n    return [null, msg]\n}\nelse{\n    return [msg, null]\n}\n\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 3560,
        "wires": [
            [
                "b52b3bb433fc481d",
                "6ca5f0562b306fbd"
            ],
            [
                "01eb084992db323d",
                "c71cefdf1bddb1f8"
            ]
        ]
    },
    {
        "id": "aac6543e13b37cf1",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 3600,
        "wires": []
    },
    {
        "id": "01eb084992db323d",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "statusCode": "400",
        "headers": {},
        "x": 820,
        "y": 3600,
        "wires": []
    },
    {
        "id": "c71cefdf1bddb1f8",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "err when created user",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 860,
        "y": 3640,
        "wires": []
    },
    {
        "id": "b52b3bb433fc481d",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "registration user",
        "func": "let randomColor = \"#\" + Math.floor(Math.random() * 16777215).toString(16);\nlet encryptedPassword = await bcrypt.hash(msg.oldpayload.password, 10);\n\nmsg.payload = {\n    \"_id\": objectid(),\n    \"deleted\": false,\n    \"avatarColor\": randomColor,\n    \"createdAt\": new Date(),\n    \"roles\": [objectid(msg.oldpayload.role)],\n    \"active\": true,\n    \"firstname\": msg.oldpayload.firstname,\n    \"lastname\": msg.oldpayload.lastname,\n    \"email\": msg.oldpayload.email,\n    \"password\": encryptedPassword,\n    \"position\": msg.oldpayload.position,\n    verifyToken: null,\n    resetPassToken: \"\",\n    resetPassExpireToken: null\n}\n\nreturn msg;\n\n\n\n\n\n\n\n// let randomColor = \"#\" + Math.floor(Math.random() * 16777215).toString(16);\n// let encryptedPassword = await bcrypt.hash(msg.oldpayload.password, 10);\n// const verifyToken = await jwt.sign(\n//     { id: Math.round(Math.random()) },\n//     \"test\",\n//     {\n//         expiresIn: \"150m\",\n//     }\n// );\n\n// msg.cookies = {};\n// msg.cookies[\"verify_token\"] = verifyToken;\n// msg.cookies[\"email_register\"] = msg.oldpayload.email;\n\n// msg.payload = {\n//     \"_id\": objectid(),\n//     \"deleted\": false,\n//     \"avatarColor\": randomColor,\n//     \"createdAt\": new Date(),\n//     \"roles\": [objectid(\"634fe97d28c82b00103cd25d\")],\n//     \"active\": false,\n//     \"firstname\": msg.oldpayload.firstname,\n//     \"lastname\": msg.oldpayload.lastname,\n//     \"email\": msg.oldpayload.email,\n//     \"password\": encryptedPassword,\n//     verifyToken,\n//     resetPassToken: \"\",\n//     resetPassExpireToken: null\n// }\n\n// return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            },
            {
                "var": "bcrypt",
                "module": "bcrypt"
            },
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            }
        ],
        "x": 840,
        "y": 3540,
        "wires": [
            [
                "95238bbd3e32d46e",
                "48be74f303bc1af1",
                "8264ce8b934ba565"
            ]
        ]
    },
    {
        "id": "6ca5f0562b306fbd",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 3500,
        "wires": []
    },
    {
        "id": "95238bbd3e32d46e",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1050,
        "y": 3580,
        "wires": []
    },
    {
        "id": "48be74f303bc1af1",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1080,
        "y": 3500,
        "wires": [
            []
        ]
    },
    {
        "id": "8264ce8b934ba565",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "a90efec1f305b81b",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1050,
        "y": 3540,
        "wires": []
    },
    {
        "id": "1148f42a7c904d7d",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "login",
        "url": "/login",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 120,
        "wires": [
            [
                "29b56ed885c828aa",
                "d15344cdbcdb2b92"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "29b56ed885c828aa",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "check",
        "func": "const regexEmail = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\nconst regexPassword = /^(?!.*\\s).{8,}/;\nconst email = msg.payload.email.toLowerCase();\n\nif (!regexEmail.test(email)) {\n    msg.statusCode = 401;\n    msg.payload = {\n        data: \"Email is invalid\",\n        code: 401\n    }\n\n    return [null, msg];\n\n} else if (!regexPassword.test(msg.payload.password)) {\n    msg.statusCode = 401;\n    msg.payload = {\n        data: \"The password is invalid. The value must be at least 8 characters and without whitespaces\",\n        code: 401\n    }\n\n    return [null, msg];\n    \n} else {\n    msg.collection = \"admins\"\n    msg.fromApp = msg.payload\n\n    node.warn(msg.fromApp)\n\n    msg.payload = {\n        email: email,\n        deleted: false\n    }\n\n    return [msg, null];\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 120,
        "wires": [
            [
                "61870a4a0e1fb5f9",
                "4ccf1a608a0fda78"
            ],
            [
                "15992d5e951487b2",
                "6794a0107083d543"
            ]
        ]
    },
    {
        "id": "cdfa6ad536d2c182",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1230,
        "y": 100,
        "wires": []
    },
    {
        "id": "7a8ea31464375c65",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "check auth",
        "func": "\nif(msg.payload.length === 0){\n    msg.statusCode = 401;\n    msg.payload = {\n        data: \"Incorrect email or password\",\n        code:401\n    }\n    node.warn(\"Email not found\");\n    return [null,msg]\n} else {\n\n    let check = await bcrypt.compare(msg.fromApp.password, msg.payload[0].password);\n\n    if (!check) {\n        msg.statusCode = 401;\n        msg.payload = {\n            data: \"Incorrect email or password\",\n            code: 401\n        }\n        node.warn(\"Password incorrect\");\n        return [null, msg]\n    }\n\n    if (msg.payload[0].active === false) {\n        msg.statusCode = 401;\n        msg.payload = {\n            data: \"Email not activated\",\n            code: 401\n        }\n        return [null, msg]\n    }\n}\n\n\n\nreturn[msg,null]",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "bcrypt",
                "module": "bcrypt"
            }
        ],
        "x": 850,
        "y": 120,
        "wires": [
            [
                "0c53fafc7b8b0abd",
                "63ac53624ddc9f69"
            ],
            [
                "bbb4626d131a82f0",
                "0588627a938f21df"
            ]
        ]
    },
    {
        "id": "bbb4626d131a82f0",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1050,
        "y": 160,
        "wires": []
    },
    {
        "id": "0c53fafc7b8b0abd",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "jwt token",
        "func": "msg.payload = msg.payload[0]\nconst token = jwt.sign(\n    { user_id: msg.payload._id, email:msg.payload.email },\n    \"test\",\n    {\n        expiresIn: \"1400m\",\n    }\n);\n\nmsg.cookies = {};\nmsg.cookies[\"user_token\"] = token;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            }
        ],
        "x": 1060,
        "y": 100,
        "wires": [
            [
                "cdfa6ad536d2c182",
                "c1fa3cab447b2b50"
            ]
        ]
    },
    {
        "id": "c1fa3cab447b2b50",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1250,
        "y": 60,
        "wires": []
    },
    {
        "id": "1a9e1833be1a828e",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "check_token",
        "url": "/check_token",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 860,
        "wires": [
            [
                "9ab82eb2290d4ad3",
                "53b13c128521ed39"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "c9df2e0ee4facac0",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "statusCode": "401",
        "headers": {},
        "x": 1040,
        "y": 900,
        "wires": []
    },
    {
        "id": "9ab82eb2290d4ad3",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "check jwt",
        "func": "msg.check = msg.payload;\nvar decoded = jwt.verify(msg.payload.token, 'test');\nmsg.payload = decoded\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            }
        ],
        "x": 320,
        "y": 860,
        "wires": [
            [
                "c0fa136aaf678f9e",
                "e3625cb5937935f6"
            ]
        ]
    },
    {
        "id": "c0fa136aaf678f9e",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 490,
        "y": 820,
        "wires": []
    },
    {
        "id": "53b13c128521ed39",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "Checker",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 320,
        "y": 820,
        "wires": []
    },
    {
        "id": "44daf418a66beccb",
        "type": "catch",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "scope": [
            "9ab82eb2290d4ad3"
        ],
        "uncaught": false,
        "x": 100,
        "y": 960,
        "wires": [
            [
                "bf5e2f39781a74ce",
                "5c03c66838f6552f"
            ]
        ]
    },
    {
        "id": "bf5e2f39781a74ce",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "func": "msg.payload = {\n    auth: \"Unautorizate\",\n    code: 401,\n    login_id: msg.check.login_id,\n    app_id: msg.check.app_id\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 270,
        "y": 960,
        "wires": [
            [
                "900a4d7eacd40aa8",
                "5534dd32cd4eb583"
            ]
        ]
    },
    {
        "id": "900a4d7eacd40aa8",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 430,
        "y": 960,
        "wires": []
    },
    {
        "id": "e3625cb5937935f6",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "check",
        "func": "msg.collection = \"admins\"\nmsg.fromApp = msg.payload\nmsg.payload = {\n    _id: objectid(msg.payload.user_id),\n    deleted:false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 490,
        "y": 860,
        "wires": [
            [
                "ba71b7a6be54c24c",
                "c23a004b5ed46242"
            ]
        ]
    },
    {
        "id": "a5c4252f23d5d115",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "check auth",
        "func": "\nif(msg.payload.length > 0){\n    msg.payload = msg.payload[0]\n    msg.user = {\n        auth: \"Success\",\n        code:200,\n        user: msg.payload\n    }\n    return [msg,null]\n}else{\n    msg.payload = {\n        auth: \"Unautorizate\",\n        code: 401,\n        login_id:msg.check.login_id,\n        app_id:msg.check.app_id\n    }\n    return [null,msg]\n}\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 860,
        "wires": [
            [
                "1d8c3cd5fbcb34cd",
                "d989f3149f1e2ca1"
            ],
            [
                "c9df2e0ee4facac0"
            ]
        ]
    },
    {
        "id": "5534dd32cd4eb583",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 430,
        "y": 1000,
        "wires": []
    },
    {
        "id": "0474cfe50076c371",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2170,
        "y": 780,
        "wires": []
    },
    {
        "id": "5c03c66838f6552f",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 290,
        "y": 1000,
        "wires": []
    },
    {
        "id": "c68c5316bd635ebb",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 820,
        "wires": []
    },
    {
        "id": "77270770ed4668be",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 2210,
        "y": 820,
        "wires": []
    },
    {
        "id": "63ac53624ddc9f69",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1050,
        "y": 60,
        "wires": []
    },
    {
        "id": "0588627a938f21df",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "err login",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1060,
        "y": 200,
        "wires": []
    },
    {
        "id": "b88f1ef7c12944c5",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 660,
        "y": 120,
        "wires": [
            [
                "7a8ea31464375c65",
                "8ba29eb975c3dada"
            ]
        ]
    },
    {
        "id": "ba71b7a6be54c24c",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 680,
        "y": 860,
        "wires": [
            [
                "a5c4252f23d5d115",
                "c68c5316bd635ebb"
            ]
        ]
    },
    {
        "id": "dbd258ba690289ce",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "THIS",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1410,
        "y": 780,
        "wires": []
    },
    {
        "id": "d15344cdbcdb2b92",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 330,
        "y": 80,
        "wires": []
    },
    {
        "id": "94b37b1e3702210e",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "signout",
        "url": "/signout",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 320,
        "wires": [
            [
                "1d501ae4389adf71",
                "12049123ddea997b"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "fb32d711d6acda3f",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "Checker",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 500,
        "y": 280,
        "wires": []
    },
    {
        "id": "5540fd046af9b4a3",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 670,
        "y": 320,
        "wires": []
    },
    {
        "id": "12049123ddea997b",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "Checker",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 320,
        "y": 280,
        "wires": []
    },
    {
        "id": "1d501ae4389adf71",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "check jwt",
        "func": "msg.cookies={\n    user_token: null\n}\n\nmsg.payload={\n    success: true\n}\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 320,
        "wires": [
            [
                "fb32d711d6acda3f",
                "55ace3edd9a3d977"
            ]
        ]
    },
    {
        "id": "55ace3edd9a3d977",
        "type": "delay",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 500,
        "y": 320,
        "wires": [
            [
                "5540fd046af9b4a3"
            ]
        ]
    },
    {
        "id": "61870a4a0e1fb5f9",
        "type": "delay",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "pauseType": "delay",
        "timeout": "4",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 480,
        "y": 120,
        "wires": [
            [
                "b88f1ef7c12944c5",
                "70fa57ef0b707609"
            ]
        ]
    },
    {
        "id": "d989f3149f1e2ca1",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "get roles",
        "func": "msg.collection = \"admin_roles\"\nmsg.payload = [\n    {\n        $match:{\n            \"_id\": ObjectId(msg.payload.roles)\n        }\n    },\n    {\n        $lookup: {\n            from: 'translation',\n            as: 'translation',\n            pipeline: [\n                {\n                    $match: {\n                        deleted: false,\n                        language: msg.user.user.language\n                    }\n                }\n            ]\n        }\n    },\n    {\n        $lookup:\n        {\n            from: \"admin_modules\",\n            localField: \"permissions.moduleId\",\n            foreignField: \"_id\",\n            as: \"menu\"\n    }\n},\n]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "ObjectId",
                "module": "objectid"
            }
        ],
        "x": 1040,
        "y": 820,
        "wires": [
            [
                "f69ec6913f31608b",
                "efdb687339852f7a"
            ]
        ]
    },
    {
        "id": "1d8c3cd5fbcb34cd",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1030,
        "y": 780,
        "wires": []
    },
    {
        "id": "8ba29eb975c3dada",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "msg from db",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 80,
        "wires": []
    },
    {
        "id": "4ccf1a608a0fda78",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "msg to db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 500,
        "y": 80,
        "wires": []
    },
    {
        "id": "70fa57ef0b707609",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "msg delay to db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 660,
        "y": 160,
        "wires": []
    },
    {
        "id": "7c44725ce0dd6e66",
        "type": "inject",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 60,
        "wires": [
            [
                "29b56ed885c828aa"
            ]
        ]
    },
    {
        "id": "a2e4ed40bc1e266b",
        "type": "catch",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "g",
        "scope": [
            "d989f3149f1e2ca1"
        ],
        "uncaught": false,
        "x": 1470,
        "y": 900,
        "wires": [
            [
                "d93b081f2710e473",
                "eea1d395aab1e021"
            ]
        ]
    },
    {
        "id": "d93b081f2710e473",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "show err Unautorizate",
        "func": "msg.payload ={\n    auth: \"Unautorizate\",\n    code: 401,\n    login_id: msg.check.login_id,\n    }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1660,
        "y": 900,
        "wires": [
            [
                "77270770ed4668be",
                "eea1d395aab1e021"
            ]
        ]
    },
    {
        "id": "eea1d395aab1e021",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1870,
        "y": 960,
        "wires": []
    },
    {
        "id": "c23a004b5ed46242",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "query to db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 820,
        "wires": []
    },
    {
        "id": "a6a7cb1ef486adb7",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "e1ecfd85e80ab727",
        "name": "verifyToken",
        "url": "/verifyToken",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 870,
        "y": 1200,
        "wires": [
            [
                "37b7307925dc6b6a",
                "dbe7859bdc101a72"
            ]
        ]
    },
    {
        "id": "d544b61618be524c",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "e1ecfd85e80ab727",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1610,
        "y": 1200,
        "wires": []
    },
    {
        "id": "dbe7859bdc101a72",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "e1ecfd85e80ab727",
        "name": "query to db",
        "func": "msg.collection = \"admins\";\nmsg.cameToken = msg.payload.token;\n\nmsg.payload = {\n    verifyToken: msg.payload.token\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 1200,
        "wires": [
            [
                "2707afa221c18f14",
                "f63003a7f842b820"
            ]
        ]
    },
    {
        "id": "37b7307925dc6b6a",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "e1ecfd85e80ab727",
        "name": "came",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1070,
        "y": 1160,
        "wires": []
    },
    {
        "id": "07d861d7dd6c672b",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "e1ecfd85e80ab727",
        "name": "finish",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1630,
        "y": 1160,
        "wires": []
    },
    {
        "id": "2707afa221c18f14",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "e1ecfd85e80ab727",
        "name": "query to db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1250,
        "y": 1160,
        "wires": []
    },
    {
        "id": "c366b8170361386c",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "e1ecfd85e80ab727",
        "name": "res db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 1160,
        "wires": []
    },
    {
        "id": "f68b14b9e5530137",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "e1ecfd85e80ab727",
        "name": "redirect to page",
        "func": "const token = await jwt.sign(\n    { user_id: msg.payload[0]._id, email: msg.payload[0].email },\n    \"test\",\n    {\n        expiresIn: \"150m\",\n    }\n);\nconst uiUrl = env.get(\"uiUrl\");\n\nmsg.token = token\nmsg.statusCode = 302\nmsg.headers = {\n    \"Access-Control-Allow-Origin\": \"*\",\n    \"Access-Control-Allow-Credentials\": true,\n    \"location\": `${uiUrl}/Login`\n}\n\nmsg.collection = \"admins\";\nmsg.query = {\n    _id: objectid(msg.payload[0]._id)\n}\nmsg.payload = {\n    $set: {\n        active: true,\n        verifyToken: null\n    }\n}\n\nnode.send(msg)",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            },
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1440,
        "y": 1200,
        "wires": [
            [
                "d544b61618be524c",
                "07d861d7dd6c672b",
                "367ec69a89a7b36f"
            ]
        ]
    },
    {
        "id": "f63003a7f842b820",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "e1ecfd85e80ab727",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1270,
        "y": 1200,
        "wires": [
            [
                "f68b14b9e5530137",
                "c366b8170361386c"
            ]
        ]
    },
    {
        "id": "367ec69a89a7b36f",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "e1ecfd85e80ab727",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1660,
        "y": 1240,
        "wires": [
            []
        ]
    },
    {
        "id": "630934d2ba3adfcf",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "queryToResetPassword",
        "url": "/queryToResetPassword",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 900,
        "y": 1640,
        "wires": [
            [
                "987a966f406f0317",
                "e113d5b54eb11866"
            ]
        ]
    },
    {
        "id": "987a966f406f0317",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "came",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1130,
        "y": 1600,
        "wires": []
    },
    {
        "id": "e113d5b54eb11866",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "query to db",
        "func": "msg.collection = \"admins\";\nmsg.token = msg.payload.token;\n\nmsg.payload = {\n    resetPassToken: msg.payload.token\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 1640,
        "wires": [
            [
                "7e71f20e36f2c96b",
                "5beb3d0299dca4de"
            ]
        ]
    },
    {
        "id": "7e71f20e36f2c96b",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "query to db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1330,
        "y": 1600,
        "wires": []
    },
    {
        "id": "5beb3d0299dca4de",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1340,
        "y": 1640,
        "wires": [
            [
                "977154bfa575d8cc",
                "03b618ad5619a3d9"
            ]
        ]
    },
    {
        "id": "977154bfa575d8cc",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "redirect to page",
        "func": "const dateNow = new Date().getTime();\nconst uiUrl = env.get(\"uiUrl\");\n\nif (msg.payload[0].resetPassExpireToken > dateNow) {\n    msg.statusCode = 302\n    msg.headers = {\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Credentials\": true,\n        \"location\": `${uiUrl}/ResetPassword?token=${msg.token}`\n    }\n} else {\n    msg.payload = '<h1>Link expired</h1>';\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            },
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1520,
        "y": 1640,
        "wires": [
            [
                "22891024c234ec96",
                "f8a1974e5e9a4952"
            ]
        ]
    },
    {
        "id": "03b618ad5619a3d9",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "res db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1510,
        "y": 1600,
        "wires": []
    },
    {
        "id": "22891024c234ec96",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1690,
        "y": 1640,
        "wires": []
    },
    {
        "id": "f8a1974e5e9a4952",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "finish queryToResetPassword",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1770,
        "y": 1600,
        "wires": []
    },
    {
        "id": "a462ea7c3960e181",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "sendEmailForResetPassword",
        "url": "/sendEmailForResetPassword",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 920,
        "y": 1460,
        "wires": [
            [
                "082882594be5b9d7",
                "63efc525ea19ee3b"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "082882594be5b9d7",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "query to db",
        "func": "const regexEmail = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\nconst email = msg.payload.email.toLowerCase();\n\nif (!regexEmail.test(email)) {\n\n    msg.statusCode = 401;\n    msg.payload = {\n        data: \"Email is invalid\",\n        code: 401\n    }\n\n    return [null, msg];\n\n} else {\n    msg.collection = \"admins\";\n\n    msg.email = msg.payload.email;\n\n    msg.payload = {\n        email: email,\n        deleted: false\n    }\n\n    return [msg, null];\n} \n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1190,
        "y": 1460,
        "wires": [
            [
                "3779488ea8a44789"
            ],
            [
                "c5e1e5ed43f29b7b",
                "3e44e35409dca156"
            ]
        ]
    },
    {
        "id": "63efc525ea19ee3b",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "came",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1170,
        "y": 1420,
        "wires": []
    },
    {
        "id": "3779488ea8a44789",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1380,
        "y": 1460,
        "wires": [
            [
                "320f408ac86ee917",
                "4b4a136be3f5195b"
            ]
        ]
    },
    {
        "id": "320f408ac86ee917",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "send response",
        "func": "if (msg.payload.length === 0){\n    msg.statusCode = 401;\n\n    msg.payload = {\n        data: \"Forbidden! Incorrect email.\",\n        code: 401\n    }\n    return [null, msg]\n}\n\nmsg.payload = msg.payload[0];\n    \nreturn[msg, null]\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1560,
        "y": 1460,
        "wires": [
            [
                "2e49347092094481",
                "a2208c9176d340a1"
            ],
            [
                "cb08f0e921e88269",
                "7337934d3eb84cbf"
            ]
        ]
    },
    {
        "id": "4b4a136be3f5195b",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "Item after DB",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1550,
        "y": 1420,
        "wires": []
    },
    {
        "id": "2e49347092094481",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "item",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1730,
        "y": 1400,
        "wires": []
    },
    {
        "id": "a2208c9176d340a1",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "query to db",
        "func": "// Add 30 minutes\nconst date = new Date();\nconst expireTime = date.setMinutes(date.getMinutes() + 30);\nconst token = crypto.randomBytes(64).toString('hex');\n\nmsg.oldpayload = msg.payload;\nmsg.token = token;\n\nmsg.cookies = {};\nmsg.cookies[\"user_email\"] = msg.email;\n\nmsg.collection = \"admins\";\nmsg.query = {\n    _id: objectid(msg.payload._id)\n}\nmsg.payload = {\n    $set: {\n        resetPassToken: token,\n        resetPassExpireToken: expireTime\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            },
            {
                "var": "crypto",
                "module": "crypto"
            }
        ],
        "x": 1750,
        "y": 1440,
        "wires": [
            [
                "610dcf5c7ed05495",
                "f30907efea165427",
                "899585c49eb514f1"
            ]
        ]
    },
    {
        "id": "cb08f0e921e88269",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1730,
        "y": 1480,
        "wires": []
    },
    {
        "id": "7337934d3eb84cbf",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "err email not found",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1770,
        "y": 1520,
        "wires": []
    },
    {
        "id": "610dcf5c7ed05495",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "query to db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1930,
        "y": 1360,
        "wires": []
    },
    {
        "id": "f30907efea165427",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "msg to email",
        "func": "const nodeUrl = env.get(\"nodeUrl\");\nconst url = `${nodeUrl}/queryToResetPassword?token=${msg.token}`;\nconst text = `\n<div style=\"padding: 10px 0; color: black;\">\n    <h1>We received a request to reset your password</h1>\n    <p>Use the link below to set up a new password for your account. If you did not request to reset your password, ignore this email and the link will expire on its own.</p>\n    <a href=\"${url}\" target=\"_blank\" style=\"margin: 10px 0; display: inline-block; padding: 16px 36px; font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif; font-size: 16px; color: #ffffff; text-decoration: none; border-radius: 6px; background: #2E3D49;\">\n        SET NEW PASSWORD\n    </a>\n</div>\n`;\n\nmsg.to = msg.oldpayload.email;\nmsg.topic = 'Reset password';\nmsg.payload = text;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            }
        ],
        "x": 1930,
        "y": 1440,
        "wires": [
            [
                "14aa79d907f0338e",
                "768aec5dcfeac092",
                "e52719be6f4aaace"
            ]
        ]
    },
    {
        "id": "899585c49eb514f1",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1960,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "768aec5dcfeac092",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 2150,
        "y": 1480,
        "wires": []
    },
    {
        "id": "e52719be6f4aaace",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "finish sendEmailForResetPassword",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2240,
        "y": 1400,
        "wires": []
    },
    {
        "id": "b4402979422646ea",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "resetPassword",
        "url": "/resetPassword",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 880,
        "y": 1840,
        "wires": [
            [
                "80d513cc3b2e29d9",
                "4d26a8b37aab9252"
            ]
        ],
        "icon": "font-awesome/fa-edit"
    },
    {
        "id": "80d513cc3b2e29d9",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "came resetPassword",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1120,
        "y": 1800,
        "wires": []
    },
    {
        "id": "4d26a8b37aab9252",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "query to db",
        "func": "msg.newPassword = msg.payload.password;\n\nmsg.collection = \"admins\";\nmsg.payload = {\n    resetPassToken: msg.payload.token\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 1840,
        "wires": [
            [
                "f39150d365ef9bec"
            ]
        ]
    },
    {
        "id": "f39150d365ef9bec",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1270,
        "y": 1840,
        "wires": [
            [
                "f51db28c9e96d516",
                "32ffca7dbdbb4b71"
            ]
        ]
    },
    {
        "id": "32ffca7dbdbb4b71",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "query update pass",
        "func": "const dateNow = new Date().getTime();\nlet check = await bcrypt.compare(msg.newPassword, msg.payload[0].password);\nlet encryptedPassword = await bcrypt.hash(msg.newPassword, 10);\n\nmsg.oldpayload = msg.payload;\n\nif (msg.payload[0].resetPassExpireToken < dateNow) {\n\n    msg.payload = '<h1>link expired</h1>';\n\n} else {\n\n    if (!!check) {\n\n        msg.statusCode = 401;\n        msg.payload = {\n            data: 'The password must be different from the previous one',\n            code: 401\n        }\n\n        return [null, msg];\n\n    } else {\n        \n        msg.collection = \"admins\";\n        msg.query = {\n            _id: objectid(msg.payload[0]._id)\n        }\n        msg.payload = {\n            $set: {\n                password: encryptedPassword,\n                resetPassToken: \"\",\n                resetPassExpireToken: null\n            }\n        }\n        \n        return [msg, null];\n\n    }\n\n}\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            },
            {
                "var": "objectid",
                "module": "objectid"
            },
            {
                "var": "bcrypt",
                "module": "bcrypt"
            }
        ],
        "x": 1470,
        "y": 1840,
        "wires": [
            [
                "7e6bc32cb18cc281",
                "a30a0fa5214a351d",
                "f3922cc6d64ea70c"
            ],
            [
                "da5cd38c8eedf28f"
            ]
        ]
    },
    {
        "id": "f51db28c9e96d516",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "res db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 1800,
        "wires": []
    },
    {
        "id": "7e6bc32cb18cc281",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "query to db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1670,
        "y": 1760,
        "wires": []
    },
    {
        "id": "a30a0fa5214a351d",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "msg to email",
        "func": "const uiUrl = env.get(\"uiUrl\");\nconst url = `${uiUrl}/Login`;\nconst dateChanged = new Date().toString().slice(0, 24);\nconst text = `\n<div style=\"padding: 10px 0; color: black;\" display: block;>\n    <img src=\"https://www.iconpacks.net/icons/2/free-icon-check-mark-3280.png\"; alt=\"Success Icon\"; width=90px; height=90px;>\n    <h1 text-align=\"center\" >Password changed!</h1>\n    <p>\n        Your password has been changed successfully. \n        This is a confirmation that your password was changed at <b>${dateChanged}</b>\n        <br><br>\n        Use your new password to log in.\n    </p>\n    <a href=\"${url}\" target=\"_blank\" style=\"margin: 10px 0; display: inline-block; padding: 16px 36px; font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif; font-size: 16px; color: #ffffff; text-decoration: none; border-radius: 6px; background: #72D393;\">\n        <b>LOGIN NOW</b>\n    </a>\n</div>\n`;\n\n// msg.to = 'daniil12.com13@gmail.com';\nmsg.to = msg.oldpayload[0].email;\nmsg.topic = 'Password changed';\nmsg.payload = text;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            }
        ],
        "x": 1670,
        "y": 1840,
        "wires": [
            [
                "6a7b90b49a12cd70",
                "f68cd0520c6f89c8",
                "343285b9ba6b3494"
            ]
        ]
    },
    {
        "id": "f3922cc6d64ea70c",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1680,
        "y": 1800,
        "wires": [
            []
        ]
    },
    {
        "id": "f68cd0520c6f89c8",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "finish sendEmailForResetPassword",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1960,
        "y": 1760,
        "wires": []
    },
    {
        "id": "343285b9ba6b3494",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1870,
        "y": 1840,
        "wires": []
    },
    {
        "id": "d3e1c8dd84bb6416",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "came",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 330,
        "y": 2460,
        "wires": []
    },
    {
        "id": "f8e5af5f59a1e3af",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "\"deleted\": true",
        "func": "msg.collection = \"admin_modules\";\n\nmsg.query = {\n    \"_id\": objectid(msg.payload._id)\n};\n\nmsg.payload = {\n    $set: {\n        deleted: true\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 360,
        "y": 2500,
        "wires": [
            [
                "b04dfc182eade345",
                "f4360b75f9ce23dc"
            ]
        ]
    },
    {
        "id": "1ec477324b3db1da",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "url": "/deleteModule",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 2520,
        "wires": [
            [
                "f8e5af5f59a1e3af",
                "778b984ef2142d31",
                "d3e1c8dd84bb6416",
                "97989da4cd772ad4"
            ]
        ]
    },
    {
        "id": "b04dfc182eade345",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "finsih parent delete",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 910,
        "y": 2500,
        "wires": []
    },
    {
        "id": "f4360b75f9ce23dc",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 560,
        "y": 2500,
        "wires": [
            [
                "b04dfc182eade345"
            ]
        ]
    },
    {
        "id": "778b984ef2142d31",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "delete using pull",
        "func": "msg.collection = \"admin_roles\"\n\nmsg.query = {\n    \"permissions.moduleId\": objectid(msg.payload._id)\n}\n\nmsg.payload =\n    { $pull: { \"permissions\": { \"moduleId\": objectid(msg.payload._id) } } }\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 360,
        "y": 2540,
        "wires": [
            [
                "ff2e358584da18de",
                "98ade5ea288bc21f"
            ]
        ]
    },
    {
        "id": "ff2e358584da18de",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "finish childs delete",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 910,
        "y": 2540,
        "wires": []
    },
    {
        "id": "97989da4cd772ad4",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 730,
        "y": 2520,
        "wires": []
    },
    {
        "id": "98ade5ea288bc21f",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 560,
        "y": 2540,
        "wires": [
            [
                "ff2e358584da18de"
            ]
        ]
    },
    {
        "id": "4667d8f84b698011",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "update roles",
        "func": "msg.collection = \"admin_roles\";\n\nmsg.query = {\n    \"permissions.moduleId\": objectid(msg.payload._id)\n    }\n\nmsg.payload = {\n    $set: {\n        \"permissions.$.module\": msg.payload.name\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 330,
        "y": 2340,
        "wires": [
            [
                "de23ce4e758a8481",
                "a64d8b91b0b8ad25"
            ]
        ]
    },
    {
        "id": "c94501f1b9a31a89",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "updateParentModule",
        "url": "/updateParentModule",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 2360,
        "wires": [
            [
                "10379d8fc69f6bbc",
                "4667d8f84b698011",
                "7468fc1efa130293"
            ]
        ],
        "icon": "font-awesome/fa-edit"
    },
    {
        "id": "de23ce4e758a8481",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "finish",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 2340,
        "wires": []
    },
    {
        "id": "a64d8b91b0b8ad25",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 520,
        "y": 2340,
        "wires": [
            []
        ]
    },
    {
        "id": "7468fc1efa130293",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 710,
        "y": 2360,
        "wires": []
    },
    {
        "id": "10379d8fc69f6bbc",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "update parent",
        "func": "msg.collection = \"admin_modules\";\n\nmsg.query = {\n    _id: objectid(msg.payload._id)\n};\n\nmsg.payload = {\n    $set: {\n        icon: msg.payload.icon,\n        position: msg.payload.position,\n        name: msg.payload.name\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 340,
        "y": 2380,
        "wires": [
            [
                "9320b1e978a9c77e",
                "bf212acc267aad4f"
            ]
        ]
    },
    {
        "id": "9320b1e978a9c77e",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 540,
        "y": 2380,
        "wires": [
            []
        ]
    },
    {
        "id": "bf212acc267aad4f",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "b3d42080d0ac0627",
        "name": "finish",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 2380,
        "wires": []
    },
    {
        "id": "da5cd38c8eedf28f",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "same pasword",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1680,
        "y": 1900,
        "wires": [
            [
                "ba4bf0a202e85aa9"
            ]
        ]
    },
    {
        "id": "ba4bf0a202e85aa9",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1850,
        "y": 1900,
        "wires": []
    },
    {
        "id": "15992d5e951487b2",
        "type": "http response",
        "z": "1d597c33277dd321",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 470,
        "y": 160,
        "wires": []
    },
    {
        "id": "6794a0107083d543",
        "type": "debug",
        "z": "1d597c33277dd321",
        "name": "err login",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 480,
        "y": 200,
        "wires": []
    },
    {
        "id": "c5e1e5ed43f29b7b",
        "type": "http response",
        "z": "1d597c33277dd321",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1370,
        "y": 1500,
        "wires": []
    },
    {
        "id": "3e44e35409dca156",
        "type": "debug",
        "z": "1d597c33277dd321",
        "name": "err register",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1390,
        "y": 1540,
        "wires": []
    },
    {
        "id": "48cc08e705197110",
        "type": "function",
        "z": "1d597c33277dd321",
        "name": "menu grouping",
        "func": "// msg.payload = msg.payload[0];\n\nmsg.prevpayload = msg.payload[0];\n// msg.permissions = msg.payload.permissions;\nmsg.permissions = msg.prevpayload.permissions;\n\n\nfunction sortByPositionNumber(arr) {\n    return arr.sort((a, b) => +a.position - +b.position);\n}\n\n// msg.menu = sortByPositionNumber(msg.payload.menu).map(el => {\nmsg.menu = sortByPositionNumber(msg.prevpayload.menu).map(el => {\n\n\n    if (el.isParent) {\n        return {\n            \"label\": el.name,\n            \"value\": el.name,\n            \"icon\": el.icon ? el.icon : \"\",\n            \"children\": el.childModules.length \n                ? sortByPositionNumber(el.childModules)\n                  .map(item => ({\n                      \"label\": item.name,\n                      \"value\": item.name,\n                      \"icon\": item.icon ? item.icon : \"\"\n                  })) \n                : []\n        }\n    } else {\n        return {\n            \"label\": el.name,\n            \"value\": el.name,\n            \"children\": [],\n            \"icon\": el.icon ? el.icon : \"\",\n        }\n    }\n    \n});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 820,
        "wires": [
            [
                "1455d15f5054ab92",
                "386cc27ed90aca7a"
            ]
        ]
    },
    {
        "id": "bb0a04a6e657b34d",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "check user permissions",
        "func": "const pageName = msg.check.page_id.replace('%20', ' ');\n\nconst parentPage = msg.menu.map((el) => el.label).includes(pageName);\nconst childPage = msg.menu.filter((e) => e.children.length > 0).flatMap((el) => el.children).map((elem) => elem.label).includes(pageName);\n\nif (parentPage || childPage) {\n\n    msg.statusCode = 200;\n    msg.payload = {\n        auth: \"Success\",\n        code: 200,\n        user: {\n            \"menu\": msg.menu,\n            \"permission\": msg.permissions,\n            \"translation\": msg.prevpayload.translation[0],\n            \"info\": msg.user\n        },\n        app: {\n            \"appName\": msg.payload.length > 0 ? msg.payload[0].appName : ''\n        }\n    }\n\n} else {\n\n    msg.payload = {\n        auth: \"Unautorizate\",\n        code: 401,\n        login_id: msg.menu[0].value + `?pageName=${msg.menu[0].value}`,\n        app_id: msg.check.app_id\n    }\n\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1990,
        "y": 820,
        "wires": [
            [
                "0474cfe50076c371",
                "77270770ed4668be"
            ]
        ]
    },
    {
        "id": "1455d15f5054ab92",
        "type": "debug",
        "z": "1d597c33277dd321",
        "name": "menu grouping",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1640,
        "y": 780,
        "wires": []
    },
    {
        "id": "f69ec6913f31608b",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "to BD",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1250,
        "y": 740,
        "wires": []
    },
    {
        "id": "efdb687339852f7a",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "links": [
            "fc6ef6a3d58037f1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1230,
        "y": 820,
        "wires": [
            [
                "48cc08e705197110"
            ]
        ]
    },
    {
        "id": "14aa79d907f0338e",
        "type": "e-mail",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "server": "smtp.gmail.com",
        "port": "465",
        "secure": true,
        "tls": true,
        "name": "",
        "dname": "",
        "x": 2190,
        "y": 1440,
        "wires": []
    },
    {
        "id": "6a7b90b49a12cd70",
        "type": "e-mail",
        "z": "1d597c33277dd321",
        "g": "7fc8f7b5100d61fa",
        "server": "smtp.gmail.com",
        "port": "465",
        "secure": true,
        "tls": true,
        "name": "",
        "dname": "",
        "x": 1870,
        "y": 1800,
        "wires": []
    },
    {
        "id": "1bbb86d99a93fe67",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "url": "/checkData",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 3740,
        "wires": [
            [
                "09e9f7e9fdbe6a6f"
            ]
        ]
    },
    {
        "id": "09e9f7e9fdbe6a6f",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "get users query",
        "func": "msg.collection = \"admins\";\n\nmsg.payload= {\n        deleted:false\n      }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 3740,
        "wires": [
            [
                "2269cb56c6676b8b"
            ]
        ]
    },
    {
        "id": "2269cb56c6676b8b",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 510,
        "y": 3740,
        "wires": [
            [
                "7379bd55f1219c1e"
            ]
        ]
    },
    {
        "id": "cc7295b3dae36e5e",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 830,
        "y": 3740,
        "wires": []
    },
    {
        "id": "4f52c83e5deddf43",
        "type": "http in",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "url": "/makeSetting",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 3800,
        "wires": [
            [
                "2cd98c7afab56662",
                "b6131c19482133c5"
            ]
        ]
    },
    {
        "id": "7ca8d20124e14b9d",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "admin_modules",
        "func": "node.warn(msg.payload);\nif(msg.payload.length===0){\n     msg.payload = [\n          { \"name\": \"Catalog\", \"position\": 1, \"icon\": msg.icon.iconBook, \"deleted\": false, \"isParent\": false },\n          { \"name\": \"Equipment Action\", \"position\": 2, \"icon\": msg.icon.iconSetting, \"deleted\": false, \"isParent\": false },\n          { \"name\": \"Category\", \"position\": 3, \"icon\": msg.icon.iconCategory, \"deleted\": false, \"isParent\": false },\n          { \"name\": \"Warehouses\", \"position\": 4, \"icon\": msg.icon.iconWarehouse, \"deleted\": false, \"isParent\": false },\n          { \"name\": \"Repair history\", \"position\": 5, \"icon\": msg.icon.iconWork, \"deleted\": false, \"isParent\": true, \"childModules\": [{ \"name\": \"Repair history\", \"page_id\": \"Repair history\", \"position\": 1 }, { \"name\": \"Repair Action\", \"page_id\": \"Repair Action\", \"position\": 2 }]},\n          { \"name\": \"Component\", \"position\": 6, \"icon\": msg.icon.iconComponents, \"deleted\": false, \"isParent\": true, \"childModules\": [{ \"name\": \"Component\", \"page_id\": \"Component\", \"position\": 1 }, { \"name\": \"Components Action\", \"page_id\": \"Components Action\", \"position\": 2 }] },\n          { \"name\": \"Settings\", \"position\": 7, \"icon\": msg.icon.iconSetup, \"deleted\": false, \"isParent\": true, \"childModules\": [{ \"name\": \"Modules\", \"page_id\": \"Modules\", \"position\": 1 }, { \"name\": \"AdminRoles\", \"page_id\": \"AdminRoles\", \"position\": 2 }, { \"name\": \"User Management\", \"page_id\": \"User Management\", \"position\": 3 }, { \"name\": \"App settings\", \"page_id\": \"App settings\", \"position\": 4 }] }         \n     ]\nmsg.collection = \"admin_modules\"\n\nreturn msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 3800,
        "wires": [
            [
                "8fe5018c93da267e",
                "021e5b163009f250"
            ]
        ]
    },
    {
        "id": "8fe5018c93da267e",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1210,
        "y": 3800,
        "wires": [
            [
                "2b484cc175c77aa8",
                "021e5b163009f250"
            ]
        ]
    },
    {
        "id": "58542ee4de0beb46",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "get module",
        "func": "msg.collection = \"admin_modules\"\nmsg.payload={deleted:false}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1450,
        "y": 3800,
        "wires": [
            [
                "ecc5b14f9f1b9bcc",
                "c94837dcbf8c6159"
            ]
        ]
    },
    {
        "id": "ecc5b14f9f1b9bcc",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "find_",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1590,
        "y": 3800,
        "wires": [
            [
                "c94837dcbf8c6159",
                "1026647a743ee174"
            ]
        ]
    },
    {
        "id": "bb13024505428c90",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "admin_roles",
        "func": "// node.warn(msg.payload.filter(e => e.name === 'Catalog')[0]._id);  \nif(msg.payload.length>0){\nmsg.payload =\n{\n    \"name\": \"admin\", \"deleted\": false, \"permissions\": [\n        { \"module\": \"Catalog\", \"moduleId\": msg.payload.filter(e => e.name === 'Catalog')[0]._id, \"canCreate\": true, \"canRead\": true, \"canEdit\": true, \"canRemove\": true },\n        { \"module\": \"Equipment Action\", \"moduleId\": msg.payload.filter(e => e.name === \"Equipment Action\")[0]._id, \"canCreate\": true, \"canRead\": true, \"canEdit\": true, \"canRemove\": true },\n        { \"module\": \"Category\", \"moduleId\": msg.payload.filter(e => e.name === 'Category')[0]._id, \"canCreate\": true, \"canRead\": true, \"canEdit\": true, \"canRemove\": true },\n        { \"module\": \"Warehouses\", \"moduleId\": msg.payload.filter(e => e.name === 'Warehouses')[0]._id, \"canCreate\": true, \"canRead\": true, \"canEdit\": true, \"canRemove\": true },\n        { \"module\": \"Repair history\", \"moduleId\": msg.payload.filter(e => e.name === 'Repair history')[0]._id, \"canCreate\": true, \"canRead\": true, \"canEdit\": true, \"canRemove\": true },\n        { \"module\": \"Component\", \"moduleId\": msg.payload.filter(e => e.name === \"Component\")[0]._id, \"canCreate\": true, \"canRead\": true, \"canEdit\": true, \"canRemove\": true },\n        { \"module\": \"Settings\", \"moduleId\": msg.payload.filter(e => e.name === 'Settings')[0]._id, \"canCreate\": true, \"canRead\": true, \"canEdit\": true, \"canRemove\": true },\n        \n        ],\n    \"createdAt\": Date.now()\n} \n    node.warn(msg.payload);  \n     \nmsg.collection = \"admin_roles\"\n    return [msg,null];\n}\nelse{\n    return[null,msg]\n}\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1790,
        "y": 3800,
        "wires": [
            [
                "e6cf594cd3ecaa1c",
                "6a6cfe56af37a136"
            ],
            [
                "a0b61ae534690f2b"
            ]
        ]
    },
    {
        "id": "e6cf594cd3ecaa1c",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1950,
        "y": 3800,
        "wires": [
            [
                "dae0251585fe30ac",
                "6a6cfe56af37a136"
            ]
        ]
    },
    {
        "id": "ce0f0d6ea77b35aa",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "get roles",
        "func": "msg.collection = \"admin_roles\"\nmsg.payload={deleted:false}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2140,
        "y": 3800,
        "wires": [
            [
                "201b9d6300656352"
            ]
        ]
    },
    {
        "id": "201b9d6300656352",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "find_",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2290,
        "y": 3800,
        "wires": [
            [
                "4ff8460f70b4ddc3"
            ]
        ]
    },
    {
        "id": "4ff8460f70b4ddc3",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "admins",
        "func": "if (msg.payload.length > 0){\nlet bcrypt = global.get('bcrypt')\nlet result = '';\nconst characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\nconst charactersLength = characters.length;\nfor (let i = 0; i < 8; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n}\n\nlet encryptedPassword = await bcrypt.hash(result, 10);\n\nmsg.password=result\nmsg.payload = {\n    \"deleted\": false,\n    \"avatarColor\": \"#80f124\",\n    \"createdAt\": global.get(\"convert_date\"),\n    \"updatedAt\": global.get(\"convert_date\"),\n    \"roles\": [msg.payload[0]._id],\n    \"active\": true,\n    \"firstname\": \"admin\",\n    \"lastname\": \"admin\",\n    \"email\": \"admin@ubos.tech\",\n    \"password\": encryptedPassword,\n    \"verifyToken\": null,\n    \"resetPassToken\": \"\",\n    \"resetPassExpireToken\": null,\n    \"attributes\": []\n}\nmsg.collection = \"admins\";\n\nreturn [msg,null];\n}else{\n    return[null,msg]\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2480,
        "y": 3800,
        "wires": [
            [
                "16f84cd6ade36c8c",
                "c32ba1fc1c7b8c68"
            ],
            [
                "b11f2c4c71aa9091"
            ]
        ]
    },
    {
        "id": "16f84cd6ade36c8c",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2650,
        "y": 3800,
        "wires": [
            [
                "0d440b3b54775148",
                "c32ba1fc1c7b8c68"
            ]
        ]
    },
    {
        "id": "2955ebbdb5ea23df",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "get admin",
        "func": "msg.collection = \"admins\";\n\nmsg.payload = {\n    \"deleted\": false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2840,
        "y": 3800,
        "wires": [
            [
                "b247e19471935656"
            ]
        ]
    },
    {
        "id": "b247e19471935656",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "find_",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2990,
        "y": 3800,
        "wires": [
            [
                "ec28c6e22dfb61d3"
            ]
        ]
    },
    {
        "id": "ec28c6e22dfb61d3",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "send response",
        "func": "if(msg.payload.length>0){\nmsg.payload={\n    error: false,\n    email: msg.payload[0].email,\n    password: msg.password\n}\nreturn [msg,null];\n}\nelse{\n    return[null,msg]\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3140,
        "y": 3800,
        "wires": [
            [
                "2f113294e97b1d54",
                "356e25f4dfb8b8e0"
            ],
            [
                "1150b7e9a28cb02e"
            ]
        ]
    },
    {
        "id": "2f113294e97b1d54",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 3350,
        "y": 3740,
        "wires": []
    },
    {
        "id": "2b484cc175c77aa8",
        "type": "delay",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1335,
        "y": 3800,
        "wires": [
            [
                "58542ee4de0beb46"
            ]
        ],
        "l": false
    },
    {
        "id": "dae0251585fe30ac",
        "type": "delay",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2045,
        "y": 3800,
        "wires": [
            [
                "ce0f0d6ea77b35aa"
            ]
        ],
        "l": false
    },
    {
        "id": "0d440b3b54775148",
        "type": "delay",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2745,
        "y": 3800,
        "wires": [
            [
                "2955ebbdb5ea23df"
            ]
        ],
        "l": false
    },
    {
        "id": "7379bd55f1219c1e",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "function 398",
        "func": "if(msg.payload.length>0){\n    msg.payload=[{data:true}]\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 3740,
        "wires": [
            [
                "cc7295b3dae36e5e"
            ]
        ]
    },
    {
        "id": "8c1fa3b8e63f95fb",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "check_",
        "func": "msg.collection = \"admins\";\n\nmsg.payload= {\n        deleted:false\n      }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 3800,
        "wires": [
            [
                "6c9133719c6d90e5"
            ]
        ]
    },
    {
        "id": "6c9133719c6d90e5",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "find_",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 590,
        "y": 3800,
        "wires": [
            [
                "15d35cfb9791dd8c",
                "74d74bc7bf47dcd0"
            ]
        ]
    },
    {
        "id": "2cd98c7afab56662",
        "type": "delay",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 285,
        "y": 3800,
        "wires": [
            [
                "8c1fa3b8e63f95fb"
            ]
        ],
        "l": false
    },
    {
        "id": "0736e1c9ae7432be",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "function 399",
        "func": "msg.payload={}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 4320,
        "wires": [
            [
                "a6c761097a3d5750"
            ]
        ]
    },
    {
        "id": "d2abca3fe9e9cd96",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "function 400",
        "func": "msg.payload={}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 4200,
        "wires": [
            [
                "9cbab5b73bde69cc"
            ]
        ]
    },
    {
        "id": "fda0591bfc9f6d11",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "function 401",
        "func": "msg.payload={}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 4260,
        "wires": [
            [
                "913f34dbec2cfb9c"
            ]
        ]
    },
    {
        "id": "ed1771b2b561cded",
        "type": "http response",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 670,
        "y": 4520,
        "wires": []
    },
    {
        "id": "bd7173ef1f76f7dc",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "function 402",
        "func": "msg.statusCode===200\nmsg.payload={\n    error: true\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 4520,
        "wires": [
            [
                "ed1771b2b561cded"
            ]
        ]
    },
    {
        "id": "356e25f4dfb8b8e0",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "function 403",
        "func": "if(msg.payload.error===false){\nmsg.url =`http://nodered-svc.nodered:1880/checkUserTime`\nmsg.payload={\n    id: env.get(\"USER_ID\")\n}\nreturn msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3370,
        "y": 3780,
        "wires": [
            [
                "a8c73a02ead9c281"
            ]
        ]
    },
    {
        "id": "a8c73a02ead9c281",
        "type": "http request",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 3550,
        "y": 3780,
        "wires": [
            []
        ]
    },
    {
        "id": "a0b61ae534690f2b",
        "type": "delay",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1180,
        "y": 3860,
        "wires": [
            [
                "8c1fa3b8e63f95fb"
            ]
        ]
    },
    {
        "id": "b11f2c4c71aa9091",
        "type": "delay",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1980,
        "y": 3880,
        "wires": [
            [
                "2b484cc175c77aa8"
            ]
        ]
    },
    {
        "id": "1150b7e9a28cb02e",
        "type": "delay",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2680,
        "y": 3880,
        "wires": [
            [
                "dae0251585fe30ac"
            ]
        ]
    },
    {
        "id": "9ed42d5eef25f4c4",
        "type": "inject",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 4180,
        "wires": [
            [
                "0736e1c9ae7432be",
                "d2abca3fe9e9cd96",
                "fda0591bfc9f6d11",
                "f806dc70bda4bef3",
                "980bd452eba989a4"
            ]
        ]
    },
    {
        "id": "3fac11d3944ea41d",
        "type": "subflow:6a6d2afa5b0c7ec9",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "x": 810,
        "y": 3800,
        "wires": [
            [
                "f82182f6297bc881"
            ]
        ]
    },
    {
        "id": "15d35cfb9791dd8c",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "function 404",
        "func": "msg.fromDB=msg.payload\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 705,
        "y": 3800,
        "wires": [
            [
                "3fac11d3944ea41d"
            ]
        ],
        "l": false
    },
    {
        "id": "f82182f6297bc881",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "function 405",
        "func": "msg.icon=msg.payload;\nmsg.payload=msg.fromDB\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 895,
        "y": 3800,
        "wires": [
            [
                "7ca8d20124e14b9d"
            ]
        ],
        "l": false
    },
    {
        "id": "913f34dbec2cfb9c",
        "type": "mongodb out",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "admin_modules",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 770,
        "y": 4260,
        "wires": []
    },
    {
        "id": "a6c761097a3d5750",
        "type": "mongodb out",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "admin_roles",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 760,
        "y": 4320,
        "wires": []
    },
    {
        "id": "9cbab5b73bde69cc",
        "type": "mongodb out",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "admins",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 760,
        "y": 4200,
        "wires": []
    },
    {
        "id": "980bd452eba989a4",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "function 406",
        "func": "msg.payload ={}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 4140,
        "wires": [
            [
                "972b32c962e7faa8"
            ]
        ]
    },
    {
        "id": "972b32c962e7faa8",
        "type": "mongodb out",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "appSettings",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 770,
        "y": 4140,
        "wires": []
    },
    {
        "id": "fa91a65821832965",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "func": "msg.payload = {};\n return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 4080,
        "wires": [
            [
                "75318a32275ee07c"
            ]
        ]
    },
    {
        "id": "75318a32275ee07c",
        "type": "mongodb out",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "knowledgeObjects",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 780,
        "y": 4080,
        "wires": []
    },
    {
        "id": "b44facb04465b594",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "function 407",
        "func": "msg.payload = {};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 4020,
        "wires": [
            [
                "b487dfa5edf33483"
            ]
        ]
    },
    {
        "id": "f806dc70bda4bef3",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "function 408",
        "func": "msg.payload = {};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 3960,
        "wires": [
            [
                "da0a9d20a6c9a958"
            ]
        ]
    },
    {
        "id": "b487dfa5edf33483",
        "type": "mongodb out",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "users_messages",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 790,
        "y": 4020,
        "wires": []
    },
    {
        "id": "da0a9d20a6c9a958",
        "type": "mongodb out",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "users",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 740,
        "y": 3960,
        "wires": []
    },
    {
        "id": "1a7c160be6b8121a",
        "type": "inject",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 4000,
        "wires": [
            [
                "980bd452eba989a4",
                "fa91a65821832965"
            ]
        ]
    },
    {
        "id": "c32ba1fc1c7b8c68",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "debug 24",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2680,
        "y": 3760,
        "wires": []
    },
    {
        "id": "b6131c19482133c5",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "debug 25",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 240,
        "y": 3860,
        "wires": []
    },
    {
        "id": "74d74bc7bf47dcd0",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "debug 26",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 660,
        "y": 3860,
        "wires": []
    },
    {
        "id": "021e5b163009f250",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "debug 27",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1200,
        "y": 3740,
        "wires": []
    },
    {
        "id": "c94837dcbf8c6159",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "debug 28",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1520,
        "y": 3740,
        "wires": []
    },
    {
        "id": "559470c78750a278",
        "type": "inject",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 4280,
        "wires": [
            [
                "0736e1c9ae7432be"
            ]
        ]
    },
    {
        "id": "6a6cfe56af37a136",
        "type": "debug",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "debug 41",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2020,
        "y": 3740,
        "wires": []
    },
    {
        "id": "1026647a743ee174",
        "type": "delay",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1685,
        "y": 3800,
        "wires": [
            [
                "bb13024505428c90"
            ]
        ],
        "l": false
    },
    {
        "id": "386cc27ed90aca7a",
        "type": "function",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "function 412",
        "func": "msg.collection = \"appSettings\"\nmsg.payload = {}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1610,
        "y": 820,
        "wires": [
            [
                "64f74f7dd4daee26"
            ]
        ]
    },
    {
        "id": "64f74f7dd4daee26",
        "type": "link call",
        "z": "1d597c33277dd321",
        "g": "f9276761348501ee",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1770,
        "y": 820,
        "wires": [
            [
                "bb0a04a6e657b34d"
            ]
        ]
    },
    {
        "id": "6345fb0aa23a3037",
        "type": "inject",
        "z": "1d597c33277dd321",
        "g": "398457a4bc6d8725",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 4100,
        "wires": [
            [
                "980bd452eba989a4"
            ]
        ]
    },
    {
        "id": "5305f3f2ec5ab99a",
        "type": "function",
        "z": "1d597c33277dd321",
        "name": "function 414",
        "func": "msg.payload={}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 4380,
        "wires": [
            [
                "050ff30d748e2f5c"
            ]
        ]
    },
    {
        "id": "050ff30d748e2f5c",
        "type": "mongodb out",
        "z": "1d597c33277dd321",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "components",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 760,
        "y": 4380,
        "wires": []
    },
    {
        "id": "220ea5867b3a34b7",
        "type": "function",
        "z": "1d597c33277dd321",
        "name": "function 415",
        "func": "msg.payload={}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 4440,
        "wires": [
            [
                "906f3381007b5d4d"
            ]
        ]
    },
    {
        "id": "906f3381007b5d4d",
        "type": "mongodb out",
        "z": "1d597c33277dd321",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "componentsBox",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 780,
        "y": 4440,
        "wires": []
    },
    {
        "id": "b5f162e31e21a9b9",
        "type": "function",
        "z": "1d597c33277dd321",
        "name": "function 416",
        "func": "msg.payload={}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 4480,
        "wires": [
            [
                "98c493e31fdf4ca4"
            ]
        ]
    },
    {
        "id": "98c493e31fdf4ca4",
        "type": "mongodb out",
        "z": "1d597c33277dd321",
        "mongodb": "1404e565686bad21",
        "name": "",
        "collection": "catalog",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 750,
        "y": 4480,
        "wires": []
    },
    {
        "id": "c9ede187048038f8",
        "type": "http in",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "",
        "url": "/createCategory",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 140,
        "wires": [
            [
                "bee0a417c2c76f4a"
            ]
        ]
    },
    {
        "id": "bee0a417c2c76f4a",
        "type": "function",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "create category",
        "func": "msg.collection = \"category\";\n\nmsg.payload = {\n    ...msg.payload,\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 340,
        "y": 140,
        "wires": [
            [
                "ad4588e0b6697b58"
            ]
        ]
    },
    {
        "id": "ad4588e0b6697b58",
        "type": "link call",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 530,
        "y": 140,
        "wires": [
            [
                "f486b3400cf5fe67"
            ]
        ]
    },
    {
        "id": "4390ab46991fdcd7",
        "type": "http response",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 870,
        "y": 120,
        "wires": []
    },
    {
        "id": "0172efbf86b302d9",
        "type": "http in",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "",
        "url": "/getCategory",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 220,
        "wires": [
            [
                "0fdc1ede3a30c495"
            ]
        ]
    },
    {
        "id": "0fdc1ede3a30c495",
        "type": "function",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "get category",
        "func": "msg.collection = \"category\";\n\nmsg.payload = {\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 220,
        "wires": [
            [
                "181d248dc917ca81"
            ]
        ]
    },
    {
        "id": "181d248dc917ca81",
        "type": "link call",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 510,
        "y": 220,
        "wires": [
            [
                "c76127892f0d3a6f"
            ]
        ]
    },
    {
        "id": "4a829645c123c888",
        "type": "http response",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 870,
        "y": 220,
        "wires": []
    },
    {
        "id": "c76127892f0d3a6f",
        "type": "function",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "function 273",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 220,
        "wires": [
            [
                "4a829645c123c888"
            ]
        ]
    },
    {
        "id": "f486b3400cf5fe67",
        "type": "function",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 140,
        "wires": [
            [
                "4390ab46991fdcd7"
            ]
        ]
    },
    {
        "id": "d10d3136976d88db",
        "type": "http in",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "",
        "url": "/updateCategory",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 300,
        "wires": [
            [
                "99a45a4b2eba7eb4"
            ]
        ]
    },
    {
        "id": "99a45a4b2eba7eb4",
        "type": "function",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "update category",
        "func": "msg.collection = \"category\";\n\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n}\n\ndelete msg.payload._id\n\nmsg.payload = {\n    $set: msg.payload\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 340,
        "y": 300,
        "wires": [
            [
                "4a4ce81660b3eb58"
            ]
        ]
    },
    {
        "id": "4a4ce81660b3eb58",
        "type": "link call",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 520,
        "y": 300,
        "wires": [
            [
                "3976fd40aefa7464"
            ]
        ]
    },
    {
        "id": "a6b6e53ec8024b9d",
        "type": "http response",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 850,
        "y": 320,
        "wires": []
    },
    {
        "id": "3976fd40aefa7464",
        "type": "function",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 320,
        "wires": [
            [
                "a6b6e53ec8024b9d"
            ]
        ]
    },
    {
        "id": "0b38ac6446d49e4e",
        "type": "http in",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "",
        "url": "/deleteCategory",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 400,
        "wires": [
            [
                "83a83d2a2a4ad1e6"
            ]
        ]
    },
    {
        "id": "83a83d2a2a4ad1e6",
        "type": "function",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "update category",
        "func": "msg.collection = \"category\";\n\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n}\n\nmsg.payload = {\n    $set: {\n        deleted: true\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 340,
        "y": 400,
        "wires": [
            [
                "1deb935b1750ec9e"
            ]
        ]
    },
    {
        "id": "1deb935b1750ec9e",
        "type": "link call",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 520,
        "y": 400,
        "wires": [
            [
                "0b1b6d283bc5371c"
            ]
        ]
    },
    {
        "id": "766d74da483182a4",
        "type": "http response",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 870,
        "y": 400,
        "wires": []
    },
    {
        "id": "0b1b6d283bc5371c",
        "type": "function",
        "z": "f6a1e1c23b85b045",
        "g": "33f66acf801d0549",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 400,
        "wires": [
            [
                "766d74da483182a4"
            ]
        ]
    },
    {
        "id": "76541e2f2c020419",
        "type": "http in",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "",
        "url": "/createWarehouse",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 140,
        "wires": [
            [
                "c1b85776155556b1"
            ]
        ]
    },
    {
        "id": "c1b85776155556b1",
        "type": "function",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "create category",
        "func": "msg.collection = \"warehouse\";\n\nmsg.payload = {\n    ...msg.payload,\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 380,
        "y": 140,
        "wires": [
            [
                "6df98d3f6dcce491"
            ]
        ]
    },
    {
        "id": "6df98d3f6dcce491",
        "type": "link call",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 570,
        "y": 140,
        "wires": [
            [
                "be3a6c3d103393dd"
            ]
        ]
    },
    {
        "id": "84fcb5dbd0a55fa0",
        "type": "http response",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 890,
        "y": 140,
        "wires": []
    },
    {
        "id": "d815fd989fb701a8",
        "type": "http in",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "",
        "url": "/getWarehouses",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 220,
        "wires": [
            [
                "55dd295e4f3f6439"
            ]
        ]
    },
    {
        "id": "55dd295e4f3f6439",
        "type": "function",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "get category",
        "func": "msg.collection = \"warehouse\";\nlet match = {};\n\nif (msg.req.query.warehouse  && msg.req.query.warehouse !== \"\" && msg.req.query.warehouse !== \"undefined\") {\n    match.warehouse = msg.req.query.warehouse\n}\nmsg.payload = {\n    deleted: false,\n    ...match\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 220,
        "wires": [
            [
                "86d3454deebe1ba9"
            ]
        ]
    },
    {
        "id": "86d3454deebe1ba9",
        "type": "link call",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 510,
        "y": 220,
        "wires": [
            [
                "a3ce464e9b8877fb"
            ]
        ]
    },
    {
        "id": "18e3be66e1030f4c",
        "type": "http response",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 870,
        "y": 220,
        "wires": []
    },
    {
        "id": "a3ce464e9b8877fb",
        "type": "function",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "function 274",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 220,
        "wires": [
            [
                "18e3be66e1030f4c"
            ]
        ]
    },
    {
        "id": "be3a6c3d103393dd",
        "type": "function",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 140,
        "wires": [
            [
                "84fcb5dbd0a55fa0"
            ]
        ]
    },
    {
        "id": "83835081047e99c2",
        "type": "http in",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "",
        "url": "/updateWarehouse",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 300,
        "wires": [
            [
                "ad4fa6a924d5cbcc"
            ]
        ]
    },
    {
        "id": "ad4fa6a924d5cbcc",
        "type": "function",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "update category",
        "func": "msg.collection = \"warehouse\";\n\nmsg.query = {\n  _id: objectid(msg.req.query._id)\n\n}\n\ndelete msg.payload._id\n\nmsg.payload = {\n     $set: msg.payload\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 340,
        "y": 300,
        "wires": [
            [
                "9c05ea2ceba3d041"
            ]
        ]
    },
    {
        "id": "9c05ea2ceba3d041",
        "type": "link call",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 520,
        "y": 300,
        "wires": [
            [
                "04ce3001f961462b"
            ]
        ]
    },
    {
        "id": "c997ff3ea9eaa0f9",
        "type": "http response",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 850,
        "y": 300,
        "wires": []
    },
    {
        "id": "04ce3001f961462b",
        "type": "function",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 300,
        "wires": [
            [
                "c997ff3ea9eaa0f9"
            ]
        ]
    },
    {
        "id": "6db54ecf7c2efb84",
        "type": "http in",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "",
        "url": "/deleteWarehouse",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 380,
        "wires": [
            [
                "9eb9571f67d3f6f8"
            ]
        ]
    },
    {
        "id": "9eb9571f67d3f6f8",
        "type": "function",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "update category",
        "func": "msg.collection = \"warehouse\";\n\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n}\n\nmsg.payload = {\n    $set: {\n        deleted: true\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 400,
        "y": 380,
        "wires": [
            [
                "1b5f0ad4fcc4015a"
            ]
        ]
    },
    {
        "id": "1b5f0ad4fcc4015a",
        "type": "link call",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 580,
        "y": 380,
        "wires": [
            [
                "eaa9ea13b3dd976d"
            ]
        ]
    },
    {
        "id": "7bfda4dfae117a69",
        "type": "http response",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 930,
        "y": 380,
        "wires": []
    },
    {
        "id": "eaa9ea13b3dd976d",
        "type": "function",
        "z": "4a515ca629060193",
        "g": "b3ea098812b7c182",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 380,
        "wires": [
            [
                "7bfda4dfae117a69"
            ]
        ]
    },
    {
        "id": "a91f038e27c48af3",
        "type": "http in",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "url": "/getCatalogSku",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 60,
        "wires": [
            [
                "fb11a27551af28bc"
            ]
        ]
    },
    {
        "id": "fb11a27551af28bc",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "filter deleted = false",
        "func": "msg.collection = \"catalog\";\n\nmsg.payload = {\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 60,
        "wires": [
            [
                "cfcfa56710aefc60"
            ]
        ]
    },
    {
        "id": "cfcfa56710aefc60",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 570,
        "y": 60,
        "wires": [
            [
                "67ef33b433117304"
            ]
        ]
    },
    {
        "id": "524d1ee4e7f11e66",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 890,
        "y": 60,
        "wires": []
    },
    {
        "id": "67ef33b433117304",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 277",
        "func": "msg.payload = msg.payload.map(e=> {\n    return {\n     _id:  e._id,\n     sku:  e.sku\n    }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 60,
        "wires": [
            [
                "524d1ee4e7f11e66"
            ]
        ]
    },
    {
        "id": "71dc6892e120306d",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "get users query",
        "func": "msg.collection = \"admins\";\n\nmsg.payload = {\n  deleted: false,\n  position: {$exists:true}\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 140,
        "wires": [
            [
                "4a11d0343eb3d2a8"
            ]
        ]
    },
    {
        "id": "7ab9fd1e4206863f",
        "type": "http in",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "url": "/getUsersIng",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 140,
        "wires": [
            [
                "71dc6892e120306d"
            ]
        ]
    },
    {
        "id": "4a11d0343eb3d2a8",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 570,
        "y": 140,
        "wires": [
            [
                "4dc2694662a63d94"
            ]
        ]
    },
    {
        "id": "462aead38ca27ac6",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 890,
        "y": 140,
        "wires": []
    },
    {
        "id": "4dc2694662a63d94",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 278",
        "func": "msg.payload = msg.payload.map(e=> {\n    return {\n        name: `${e.firstname}  ${e.lastname}`,\n        _id: e._id\n    }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 140,
        "wires": [
            [
                "462aead38ca27ac6"
            ]
        ]
    },
    {
        "id": "a1c82f7ec6f3438d",
        "type": "http in",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "url": "/getComponentsForHistory",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 240,
        "wires": [
            [
                "f6e61fe917fd9418"
            ]
        ]
    },
    {
        "id": "2dcd8f386246c697",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "get component",
        "func": "msg.collection = \"components\";\n\nmsg.payload = [\n    {\n        $match:{\n            \"deleted\": false,\n            \"_id\":{$in: msg.arrayId}\n       }\n    },\n    {\n        $lookup: {\n            from: \"category\",\n            localField: \"category\",\n            foreignField: \"_id\",\n            as: \"category_info\"\n        }\n    },\n    {\n        $lookup: {\n            from: \"componentsBox\",\n            localField: \"box\",\n            foreignField: \"_id\",\n            as: \"box_info\"\n        }\n    },\n\n   \n];\n\n\n\n\n\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 540,
        "y": 240,
        "wires": [
            [
                "5c7460173f1fe70f"
            ]
        ]
    },
    {
        "id": "5c7460173f1fe70f",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "fc6ef6a3d58037f1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 770,
        "y": 240,
        "wires": [
            [
                "a6c358c02d19e8e1"
            ]
        ]
    },
    {
        "id": "0272144832f15c94",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1150,
        "y": 240,
        "wires": []
    },
    {
        "id": "a6c358c02d19e8e1",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 279",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 240,
        "wires": [
            [
                "0272144832f15c94"
            ]
        ]
    },
    {
        "id": "f6e61fe917fd9418",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 280",
        "func": "if (msg.payload._id !== null && msg.payload._id !== undefined) {\n    let component = msg.payload._id\n    msg.arrayId = component.map(e => objectid(e))\n    return [null, msg];\n}\nelse {\n\n    msg.payload = {\n        success: false,\n        payload: {}\n    }\n    return [msg, null]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 385,
        "y": 240,
        "wires": [
            [
                "e85e1e17d0de0df3"
            ],
            [
                "2dcd8f386246c697"
            ]
        ],
        "l": false
    },
    {
        "id": "4730c665c7f8c2b0",
        "type": "http in",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "url": "/getHistory",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 440,
        "wires": [
            [
                "4997607767618523"
            ]
        ]
    },
    {
        "id": "6e0f4f314de463f3",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "fc6ef6a3d58037f1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 530,
        "y": 440,
        "wires": [
            [
                "207bb7ab3ce4992f"
            ]
        ]
    },
    {
        "id": "207bb7ab3ce4992f",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 730,
        "y": 440,
        "wires": []
    },
    {
        "id": "4997607767618523",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "to BD",
        "func": "msg.collection = \"history\"\nlet match = {};\n\nmsg.payload = [\n    {\n        $match: {\n            \"deleted\": false,\n            ...match\n        }\n    },\n    {\n        $lookup: {\n            from: \"admins\",\n            localField: \"engineer\",\n            foreignField: \"_id\",\n            as: \"engineer\"\n        }\n    },\n    {\n        $project: {\n            _id: 1,\n            sku: 1,\n            typeRepair: 1,\n            engineer: 1,\n            components: 1,\n            description: 1,\n            createdAt: 1,\n            dateFinish: 1,\n            deleted: 1,\n          \n        }\n    }\n        \n  \n];\n return msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 330,
        "y": 440,
        "wires": [
            [
                "6e0f4f314de463f3"
            ]
        ]
    },
    {
        "id": "2d3277ba623254b6",
        "type": "http in",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "url": "/createRepair",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 540,
        "wires": [
            [
                "45768b897ff285f8"
            ]
        ]
    },
    {
        "id": "b2f87f8338c3fc76",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "30dba71c3351cb34"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 550,
        "y": 540,
        "wires": [
            [
                "98e3bb23f0bbdb30",
                "1da0c0f7285ddc18"
            ]
        ]
    },
    {
        "id": "45768b897ff285f8",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "create new",
        "func": "msg.collection = \"history\"\n\n\nmsg.payload = {\n    \"sku\": msg.payload.sku,\n    \"typeRepair\": msg.payload.typeRepair,\n    \"engineer\": objectid(msg.payload.engineer),\n    \"description\": msg.payload.description,\n    \"createdAt\": msg.payload.createdAt,\n        deleted: false\n}\n\n\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 350,
        "y": 540,
        "wires": [
            [
                "b2f87f8338c3fc76"
            ]
        ]
    },
    {
        "id": "98e3bb23f0bbdb30",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 500,
        "wires": []
    },
    {
        "id": "4e095c541c260212",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1160,
        "y": 540,
        "wires": [
            [
                "7117c0f97ca54c87"
            ]
        ]
    },
    {
        "id": "c35fe28c30af5848",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "Update query",
        "func": "msg.collection = \"catalog\"\n\nmsg.query = {\n    _id: objectid(msg.payload[0]._id)\n}\n\ndelete msg.payload._id\n\nmsg.payload = {\n    $set: {\n        status: msg.forBase.typeRepair\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 960,
        "y": 540,
        "wires": [
            [
                "4e095c541c260212"
            ]
        ]
    },
    {
        "id": "1da0c0f7285ddc18",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 285",
        "func": "msg.forBase =msg.payload\nmsg.collection = \"catalog\"\nmsg.payload = {\n\"sku\":msg.payload.sku,\ndeleted:false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 540,
        "wires": [
            [
                "9b8683520a3bb12b"
            ]
        ]
    },
    {
        "id": "9b8683520a3bb12b",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 825,
        "y": 540,
        "wires": [
            [
                "c35fe28c30af5848"
            ]
        ],
        "l": false
    },
    {
        "id": "5e7b1feaa9e975cb",
        "type": "http in",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "url": "/updateRepair",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 660,
        "wires": [
            [
                "786a45fa317b7db4",
                "afbb0ce57fe5129e"
            ]
        ]
    },
    {
        "id": "786a45fa317b7db4",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 286",
        "func": "msg.collection = \"history\"\nmsg.query = {\n    _id: objectid(msg.payload._id)\n}\nconst transformedComponent = msg.payload.component ? msg.payload.component.map(obj => {\n     node.warn(obj)\n    const [id, { amount, article, name,price}] = Object.entries(obj)[0];\n    return { id: objectid(id), amount, article, name,price};\n}) : \"\";\nmsg.fromApp = {\n        \"sku\": msg.payload.sku,\n        \"typeRepair\": msg.payload.typeRepair,\n        \"components\": transformedComponent,\n    }\n\nmsg.payload = {\n    $set:{\n    \"sku\": msg.payload.sku,\n    \"typeRepair\": msg.payload.typeRepair,\n    \"engineer\": objectid(msg.payload.engineer),\n    \"components\": transformedComponent,\n    \"description\": msg.payload.description,\n    \"dateFinish\": msg.payload.dateFinish,\n}\n}\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 350,
        "y": 660,
        "wires": [
            [
                "078e0847c5a0cfde",
                "e38dae267c077244",
                "afbb0ce57fe5129e"
            ]
        ]
    },
    {
        "id": "078e0847c5a0cfde",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 560,
        "y": 660,
        "wires": [
            [
                "c21d546b4bfb9d24",
                "e38dae267c077244"
            ]
        ]
    },
    {
        "id": "e38dae267c077244",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 287",
        "func": "msg.array = msg.fromApp.components\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 700,
        "wires": [
            [
                "b854b62c6d3ebe93"
            ]
        ]
    },
    {
        "id": "8a95921dcb0477c8",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1090,
        "y": 820,
        "wires": [
            [
                "1845bdd1e6a0756a",
                "b854b62c6d3ebe93"
            ]
        ]
    },
    {
        "id": "50cab4b486c4b832",
        "type": "http in",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "url": "/getSingleRepair",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 340,
        "wires": [
            [
                "e70918fb8eb8117d"
            ]
        ]
    },
    {
        "id": "e70918fb8eb8117d",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 288",
        "func": "\nif (msg.req.query._id !== \"null\" && msg.req.query._id !== \"undefined\") {\n   msg.collection = \"history\";\n\n    msg.payload = {\n        \"_id\": objectid(msg.payload._id)\n    }\n    return [null, msg];\n}\nelse {\n\n    msg.payload = {\n        success: false,\n        payload: {}\n    }\nreturn [msg, null]}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 350,
        "y": 340,
        "wires": [
            [
                "a1fe61728a76e058"
            ],
            [
                "af6a12851ad6b92a"
            ]
        ]
    },
    {
        "id": "af6a12851ad6b92a",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 535,
        "y": 360,
        "wires": [
            [
                "c1b8d920e18cad12"
            ]
        ],
        "l": false
    },
    {
        "id": "a1fe61728a76e058",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 570,
        "y": 320,
        "wires": []
    },
    {
        "id": "c1b8d920e18cad12",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 670,
        "y": 360,
        "wires": []
    },
    {
        "id": "e85e1e17d0de0df3",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 550,
        "y": 200,
        "wires": []
    },
    {
        "id": "a02ae6aa555d94c5",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1240,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "36c32914167a862d",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "Update query",
        "func": "msg.collection = \"catalog\"\n\nmsg.query = {\n    _id: objectid(msg.payload[0]._id)\n}\n\ndelete msg.payload._id\n\nmsg.payload = {\n    $set: {\n        status: \"готове\"\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1020,
        "y": 620,
        "wires": [
            [
                "a02ae6aa555d94c5"
            ]
        ]
    },
    {
        "id": "c21d546b4bfb9d24",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 289",
        "func": "msg.collection = \"catalog\"\nmsg.payload = {\n\"sku\":msg.fromApp.sku,\ndeleted:false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 620,
        "wires": [
            [
                "dbee837126a08054"
            ]
        ]
    },
    {
        "id": "dbee837126a08054",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 875,
        "y": 620,
        "wires": [
            [
                "36c32914167a862d"
            ]
        ],
        "l": false
    },
    {
        "id": "b854b62c6d3ebe93",
        "type": "array-loop",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "key": "item",
        "keyType": "msg",
        "reset": false,
        "resetValue": "value-null",
        "array": "array",
        "arrayType": "msg",
        "x": 960,
        "y": 700,
        "wires": [
            [
                "6499772815cb2d33"
            ],
            [
                "f8485751b678c33b"
            ]
        ]
    },
    {
        "id": "f8485751b678c33b",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 290",
        "func": "\nmsg.collection = \"components\";\nnode.warn(msg.payload)\nmsg.amount= msg.payload.amount\nmsg.payload = {\n    _id: objectid(msg.payload.id)\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 890,
        "y": 820,
        "wires": [
            [
                "8a95921dcb0477c8"
            ]
        ]
    },
    {
        "id": "1845bdd1e6a0756a",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 291",
        "func": "msg.query = {\n    _id: objectid(msg.payload[0]._id)\n}\nlet newQuantity = msg.payload[0].quantity - msg.amount\nmsg.payload = {\n    $set: {\n        quantity: newQuantity\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1270,
        "y": 820,
        "wires": [
            [
                "400c3d6a293a6b8e"
            ]
        ]
    },
    {
        "id": "400c3d6a293a6b8e",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1476,
        "y": 818,
        "wires": [
            []
        ]
    },
    {
        "id": "a4095938ed3b04b6",
        "type": "http in",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "url": "/deleteRepairs",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 1000,
        "wires": [
            [
                "7aab4fe964284f13"
            ]
        ]
    },
    {
        "id": "e175d12d68401b0a",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 293",
        "func": "msg.collection = \"history\"\nmsg.query = {\n    _id: objectid(msg.payload[0]._id)\n}\nconst arr = msg.payload[0].components;\n\nmsg.fromApp = {\n        \"sku\": msg.payload[0].sku,\n        \"typeRepair\": msg.payload[0].typeRepair,\n    \"components\": arr,\n    }\n\n\nmsg.payload = {\n    $set:{\n  deleted:true\n}\n}\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 690,
        "y": 1000,
        "wires": [
            [
                "63562d4cee594175",
                "a0c849de78c4bc5a"
            ]
        ]
    },
    {
        "id": "63562d4cee594175",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 880,
        "y": 960,
        "wires": [
            [
                "e7eef5fec85b200a",
                "a0c849de78c4bc5a"
            ]
        ]
    },
    {
        "id": "a0c849de78c4bc5a",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 294",
        "func": "\nif (msg.fromApp.components){\n    msg.array = msg.fromApp.components\n    return [msg,null]\n}else{\n    return [null, msg]\n}\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 1020,
        "wires": [
            [
                "fc5e77c2dfa59415"
            ],
            [
                "2b7c352f5387da87"
            ]
        ]
    },
    {
        "id": "4f5572a42d20ae0d",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1430,
        "y": 1140,
        "wires": [
            [
                "be5e8938bf0ce9c0",
                "fc5e77c2dfa59415",
                "fa30684a95651b49"
            ]
        ]
    },
    {
        "id": "124355806426d505",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1580,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "091481a0393f6b54",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "Update query",
        "func": "msg.collection = \"catalog\"\n\nmsg.query = {\n    _id: objectid(msg.payload[0]._id)\n}\n\ndelete msg.payload._id\n\nmsg.payload = {\n    $set: {\n        status: \"готове\"\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1360,
        "y": 940,
        "wires": [
            [
                "124355806426d505"
            ]
        ]
    },
    {
        "id": "e7eef5fec85b200a",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 295",
        "func": "msg.collection = \"catalog\"\nmsg.payload = {\n\"sku\":msg.fromApp.sku,\ndeleted:false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 940,
        "wires": [
            [
                "0ae9eac7f7d3aa06"
            ]
        ]
    },
    {
        "id": "0ae9eac7f7d3aa06",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1215,
        "y": 940,
        "wires": [
            [
                "091481a0393f6b54"
            ]
        ],
        "l": false
    },
    {
        "id": "fc5e77c2dfa59415",
        "type": "array-loop",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "key": "item",
        "keyType": "msg",
        "reset": false,
        "resetValue": "value-null",
        "array": "array",
        "arrayType": "msg",
        "x": 1300,
        "y": 1020,
        "wires": [
            [
                "978d8d14c8fb7c02"
            ],
            [
                "593ccceb001ea032"
            ]
        ]
    },
    {
        "id": "593ccceb001ea032",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 296",
        "func": "\nmsg.collection = \"components\";\nnode.warn(msg.payload)\nmsg.amount= msg.payload.amount\nmsg.payload = {\n    _id: objectid(msg.payload.id)\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1230,
        "y": 1140,
        "wires": [
            [
                "4f5572a42d20ae0d",
                "fa30684a95651b49"
            ]
        ]
    },
    {
        "id": "be5e8938bf0ce9c0",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 297",
        "func": "msg.query = {\n    _id: objectid(msg.payload[0]._id)\n}\nlet newQuantity = msg.payload[0].quantity +( msg.amount)\nnode.warn(msg.payload[0].quantity)\nmsg.payload = {\n    $set: {\n        quantity: newQuantity\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1610,
        "y": 1140,
        "wires": [
            [
                "d864e981ef0e0c07",
                "fa30684a95651b49"
            ]
        ]
    },
    {
        "id": "d864e981ef0e0c07",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "2bc8f715aab4e1d1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1816,
        "y": 1138,
        "wires": [
            []
        ]
    },
    {
        "id": "c48fcb29e42cc115",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "links": [
            "8b652fdd647781e8"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 510,
        "y": 1000,
        "wires": [
            [
                "e175d12d68401b0a"
            ]
        ]
    },
    {
        "id": "7aab4fe964284f13",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "function 298",
        "func": "msg.collection = \"history\"\nmsg.payload = {\n    _id: objectid(msg.payload._id)\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 330,
        "y": 1000,
        "wires": [
            [
                "c48fcb29e42cc115"
            ]
        ]
    },
    {
        "id": "2b7c352f5387da87",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1090,
        "y": 1080,
        "wires": []
    },
    {
        "id": "43275b0254641e53",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1550,
        "y": 560,
        "wires": []
    },
    {
        "id": "7117c0f97ca54c87",
        "type": "function",
        "z": "c504bd7256b5c336",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1410,
        "y": 560,
        "wires": [
            [
                "43275b0254641e53"
            ]
        ]
    },
    {
        "id": "a5235cc484c1edda",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1310,
        "y": 720,
        "wires": []
    },
    {
        "id": "6499772815cb2d33",
        "type": "function",
        "z": "c504bd7256b5c336",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 720,
        "wires": [
            [
                "a5235cc484c1edda"
            ]
        ]
    },
    {
        "id": "59477ed4a44d3e8f",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1670,
        "y": 1040,
        "wires": []
    },
    {
        "id": "978d8d14c8fb7c02",
        "type": "function",
        "z": "c504bd7256b5c336",
        "name": "status",
        "func": "\nmsg.payload = {\n    success: true,\n    error: \"Everything is OK\"\n}\n\nmsg.statusCode = 200\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1530,
        "y": 1040,
        "wires": [
            [
                "59477ed4a44d3e8f"
            ]
        ]
    },
    {
        "id": "da65feef95962489",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "function 301",
        "func": "\n// // Перетворюємо масив елементів у масив рядків таблиці\nconst rows = msg.componets.map(item => [{ text: item.name, style: 'tableContent' }, { text: item.article, style: 'tableContent' }, { text: item.amount, style: 'tableContent' }, { text: item.price, style: 'tableContent' }, { text: item.totalPrice, style: 'tableContent' }]);\n\n// Додаємо рядки таблиці до масиву body\nconst body = [[{ text: 'Назва', style: 'tableHeader' }, { text: 'Артикул', style: 'tableHeader' }, { text: 'Кількість', style: 'tableHeader' }, { text: 'Ціна €', style: 'tableHeader' }, { text: 'Сума €', style: 'tableHeader' }],\n...rows\n];\n\n\n// Calculate the total sum of the \"totalPrice\" column\nconst total = rows.reduce((acc, row) => acc + parseFloat(row[row.length - 1].text), 0);\n\n// Add a row to the \"body\" array with the total sum\nbody.push([{ text: 'Всього €', style: 'tableHeader' }, '', '', '', { text: total.toFixed(2), style: 'tableContent' }]);\n\n// Update the \"msg.payload\" object with the modified \"body\" array\nmsg.payload = {\n    content: [\n        { text: 'Акт виконаних робіт', style: 'header' },\n        { text: `Обладнання: ${msg.payload.items}` },\n        { text: `Sku: ${msg.payload.Sku}` },\n        { text: `Комплектація: ${msg.payload.complection}` },\n        { text: `Зовнішній стан: ${msg.payload.looks}` },\n        { text: `Зауваження та заключення: ${msg.payload.moreInfo}` },\n        { text: `Клієнт: ${msg.payload.client}` },\n        {\n            style: 'tableStyle',\n            table: {\n                headerRows: 1,\n                widths: ['*', '*', '*', '*', '*'],\n                body: body\n            }\n        },\n        { text: `Дата: ${msg.data}` }\n    ],\n    styles: {\n        header: {\n            fontSize: 18,\n            bold: true,\n            margin: [0, 0, 0, 10]\n        },\n        tableStyle: {\n            margin: [0, 10, 0, 10]\n        },\n        tableHeader: {\n            fontSize: 12,\n            bold: true,\n            fillColor: '#eee',\n            margin: [0, 2, 0, 2]\n        },\n        tableContent: {\n            fontSize: 10,\n            margin: [0, 2, 0, 2]\n        }\n    }\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 415,
        "y": 1400,
        "wires": [
            [
                "458ef9610cc8519f",
                "3f2169bfe88e0949"
            ]
        ],
        "l": false
    },
    {
        "id": "65f95263b33da0b7",
        "type": "http in",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "",
        "url": "/pdf",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 200,
        "y": 1400,
        "wires": [
            [
                "cf89c8c292353488",
                "4cccba5fab6ce78a"
            ]
        ]
    },
    {
        "id": "3f2169bfe88e0949",
        "type": "pdfmake",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "",
        "outputType": "Buffer",
        "inputProperty": "payload",
        "options": "{}",
        "outputProperty": "payload",
        "x": 560,
        "y": 1400,
        "wires": [
            [
                "f5e32587e3d58424"
            ]
        ]
    },
    {
        "id": "f5e32587e3d58424",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "function 302",
        "func": "\nmsg.headers = {\n    \"Content-Disposition\": \"attachment\",\n    'Content-Type': 'application/pdf'\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 1400,
        "wires": [
            [
                "d46208a6bdc8ff5c",
                "458ef9610cc8519f"
            ]
        ]
    },
    {
        "id": "d46208a6bdc8ff5c",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 890,
        "y": 1400,
        "wires": []
    },
    {
        "id": "cf89c8c292353488",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "function 303",
        "func": "\n\nmsg.componets= JSON.parse(msg.payload.components)\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 305,
        "y": 1400,
        "wires": [
            [
                "4cccba5fab6ce78a",
                "4a826ca39df63118"
            ]
        ],
        "l": false
    },
    {
        "id": "e7990639b467c6b4",
        "type": "http in",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "",
        "url": "/getCatalogItemsAct",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 230,
        "y": 1520,
        "wires": [
            [
                "c25eaeea8280e9f7",
                "0b2889679d274d4e"
            ]
        ]
    },
    {
        "id": "b66755ed2a66fe4a",
        "type": "link call",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "",
        "links": [
            "fc6ef6a3d58037f1"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 690,
        "y": 1520,
        "wires": [
            [
                "364a7bc93def9264",
                "6fcc735b232ebcde"
            ]
        ]
    },
    {
        "id": "b3f943838e30a761",
        "type": "http response",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1070,
        "y": 1520,
        "wires": []
    },
    {
        "id": "0b2889679d274d4e",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "to BD",
        "func": "msg.collection = \"catalog\";\nlet match = {sku: msg.req.query.sku};\n\n\n\n\n\n\n\nmsg.payload = [\n    {\n        $match: {\n            \"deleted\": false,\n            ...match\n        }\n    },\n    {\n        $lookup: {\n            from: \"warehouse\",\n            localField: \"address\",\n            foreignField: \"_id\",\n            as: \"warehouse_info\"\n        }\n    },\n    {\n        $lookup: {\n            from: \"category\",\n            localField: \"category\",\n            foreignField: \"_id\",\n            as: \"category_info\"\n        }\n    }\n\n\n\n];\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 470,
        "y": 1520,
        "wires": [
            [
                "b66755ed2a66fe4a",
                "6fcc735b232ebcde"
            ]
        ]
    },
    {
        "id": "364a7bc93def9264",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "to App",
        "func": "msg.payload = msg.payload.map(e=>{\n    return {\n        _id: e._id,\n        label: e.label,\n        model: e.model,\n        type: e.type,\n        serialNumber: e.serialNumber,\n        color: e.color,\n        sku: e.sku,\n        address: e.address,\n        category: e.category,\n        qr: e.qr,\n        more: e.more,\n        deleted: e.deleted,\n        isClient:e.isClient,\n        addressLabel: e.warehouse_info[0].warehouse,\n        addressWarehouse: e.warehouse_info[0].address,\n        categoryLabel: e.category_info[0].label,\n        status: e.status,\n        categoryName: e.category_info[0].name\n\n    }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 1520,
        "wires": [
            [
                "b3f943838e30a761",
                "6fcc735b232ebcde"
            ]
        ]
    },
    {
        "id": "6fcc735b232ebcde",
        "type": "debug",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "debug 38",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 780,
        "y": 1580,
        "wires": []
    },
    {
        "id": "afbb0ce57fe5129e",
        "type": "debug",
        "z": "c504bd7256b5c336",
        "g": "bc5de473d17e7d01",
        "name": "debug 39",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 500,
        "y": 740,
        "wires": []
    },
    {
        "id": "c25eaeea8280e9f7",
        "type": "debug",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "debug 40",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 460,
        "y": 1580,
        "wires": []
    },
    {
        "id": "458ef9610cc8519f",
        "type": "debug",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "debug 41",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 800,
        "y": 1320,
        "wires": []
    },
    {
        "id": "4cccba5fab6ce78a",
        "type": "debug",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "debug 42",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 1320,
        "wires": []
    },
    {
        "id": "fa30684a95651b49",
        "type": "debug",
        "z": "c504bd7256b5c336",
        "name": "debug 43",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1600,
        "y": 1240,
        "wires": []
    },
    {
        "id": "4a826ca39df63118",
        "type": "function",
        "z": "c504bd7256b5c336",
        "g": "fb37c28a5458cc2f",
        "name": "convertada",
        "func": "\nconst setMonthName = (monthNumber) => {\n    let result = {}\n    switch (monthNumber) {\n        case 1:\n            result = {\n                shortNameEng: \"Jan\",\n                shortNameHeb: \"Січень\",\n            }\n            break;\n        case 2:\n            result = {\n                shortNameEng: \"Feb\",\n                shortNameHeb: \"Лютий\",\n            }\n            break;\n        case 3:\n            result = {\n                shortNameEng: \"Mar\",\n                shortNameHeb: \"Березень\",\n            }\n            break;\n        case 4:\n            result = {\n                shortNameEng: \"Apr\",\n                shortNameHeb: \"Квітень\",\n            }\n            break;\n        case 5:\n            result = {\n                shortNameEng: \"May\",\n                shortNameHeb: \"Травень\",\n            }\n            break;\n        case 6:\n            result = {\n                shortNameEng: \"Jun\",\n                shortNameHeb: \"Червень\",\n            }\n            break;\n        case 7:\n            result = {\n                shortNameEng: \"Jul\",\n                shortNameHeb: \"Липень\",\n            }\n            break;\n        case 8:\n            result = {\n                shortNameEng: \"Aug\",\n                shortNameHeb: \"Серпень\",\n            }\n            break;\n        case 9:\n            result = {\n                shortNameEng: \"Sep\",\n                shortNameHeb: \"Вересень\",\n            }\n            break;\n        case 10:\n            result = {\n                shortNameEng: \"Oct\",\n                shortNameHeb: \"Жовтень\",\n            }\n            break;\n        case 11:\n            result = {\n                shortNameEng: \"Nov\",\n                shortNameHeb: \"Листопад\",\n            }\n            break;\n        case 12:\n            result = {\n                shortNameEng: \"Dec\",\n                shortNameHeb: \"Грудень\",\n            }\n            break;\n        default:\n            result = {\n                shortNameEng: monthNumber,\n                shortNameHeb: monthNumber,\n            }\n    }\n    node.warn(result.shortNameHeb)\n    return result.shortNameHeb\n}\n\nconst dateConverter = () => {\n    const date = new Date()\n\n    let day = date.getDate() < 10 ? '0' + date.getDate() : date.getDate()\n\n    let month = +date.getMonth() + 1\n    month = month < 10 ? '0' + month : month\n\n    return `${day}.${month}.${date.getFullYear()}`\n}\n\nmsg.data = dateConverter()\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 355,
        "y": 1400,
        "wires": [
            [
                "da65feef95962489"
            ]
        ],
        "l": false
    }
]